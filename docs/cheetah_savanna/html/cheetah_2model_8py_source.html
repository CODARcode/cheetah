<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Cheetah/Savanna API: cheetah/model.py Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Cheetah/Savanna API
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_eccc38d310e5d02a09db769ab861e911.html">cheetah</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">model.py</div>  </div>
</div><!--header-->
<div class="contents">
<a href="cheetah_2model_8py.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno"><a class="line" href="namespacecodar_1_1cheetah_1_1model.html">    1</a></span>&#160;<span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="stringliteral">Object oriented model to represent jobs to run on different Supercomputers or</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="stringliteral">workstations using different schedulers and runners (for running applications</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="stringliteral">on compute nodes from front end nodes), and allow pass through of scheduler</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="stringliteral">or runner specific options.</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="stringliteral">Subclasses representing specific types of schedulers, runners, and</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="stringliteral">supercomputers (machines) are specified in other modules with the corresponding</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="stringliteral">name.</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="keyword">import</span> os</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="keyword">import</span> sys</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="keyword">import</span> stat</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="keyword">import</span> json</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="keyword">import</span> math</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="keyword">import</span> shlex</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="keyword">import</span> inspect</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="keyword">import</span> getpass</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="keyword">from</span> pathlib <span class="keyword">import</span> Path</div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="keyword">from</span> collections <span class="keyword">import</span> OrderedDict</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="keyword">import</span> warnings</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="keyword">import</span> pdb</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="keyword">from</span> <a class="code" href="namespacecodar_1_1savanna.html">codar.savanna</a> <span class="keyword">import</span> machines</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="keyword">from</span> <a class="code" href="namespacecodar_1_1savanna_1_1node__layout.html">codar.savanna.node_layout</a> <span class="keyword">import</span> NodeLayout</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="keyword">from</span> <a class="code" href="namespacecodar_1_1cheetah.html">codar.cheetah</a> <span class="keyword">import</span> parameters, config, templates, exc, machine_launchers</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="keyword">from</span> <a class="code" href="namespacecodar_1_1cheetah_1_1helpers.html">codar.cheetah.helpers</a> <span class="keyword">import</span> copy_to_dir, copy_to_path</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="keyword">from</span> <a class="code" href="namespacecodar_1_1cheetah_1_1helpers.html">codar.cheetah.helpers</a> <span class="keyword">import</span> relative_or_absolute_path, \</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;    relative_or_absolute_path_list, parse_timedelta_seconds</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="keyword">from</span> <a class="code" href="namespacecodar_1_1cheetah_1_1parameters.html">codar.cheetah.parameters</a> <span class="keyword">import</span> SymLink</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="keyword">from</span> <a class="code" href="namespacecodar_1_1cheetah_1_1adios__params.html">codar.cheetah.adios_params</a> <span class="keyword">import</span> xml_has_transport</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="keyword">from</span> <a class="code" href="namespacecodar_1_1cheetah_1_1parameters.html">codar.cheetah.parameters</a> <span class="keyword">import</span> ParamCmdLineArg</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="keyword">from</span> <a class="code" href="namespacecodar_1_1cheetah_1_1exc.html">codar.cheetah.exc</a> <span class="keyword">import</span> CheetahException</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;</div><div class="line"><a name="l00036"></a><span class="lineno"><a class="line" href="namespacecodar_1_1cheetah_1_1model.html#a7d8bea761417a3809aef433e77fd2887">   36</a></span>&#160;RESERVED_CODE_NAMES = set([<span class="stringliteral">&#39;post-process&#39;</span>])</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;</div><div class="line"><a name="l00039"></a><span class="lineno"><a class="line" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html">   39</a></span>&#160;<span class="keyword">class </span><a class="code" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html">Campaign</a>(object):</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    <span class="stringliteral">&quot;&quot;&quot;An experiment class specifies an application, a set of parameter to</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="stringliteral">    sweep over, and a set of supported target machine. A specific instance</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="stringliteral">    binds the experiment to a specific machine within the set of supported</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="stringliteral">    machines, and supports generating a set of scripts to run the experiment</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="stringliteral">    on that machine.&quot;&quot;&quot;</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    <span class="comment"># subclasses must populate these</span></div><div class="line"><a name="l00047"></a><span class="lineno"><a class="line" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#abc6944cb247705f1e7059d59537836d0">   47</a></span>&#160;    name = <span class="keywordtype">None</span></div><div class="line"><a name="l00048"></a><span class="lineno"><a class="line" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a963d2407a8818742d80cdabd0b462dc6">   48</a></span>&#160;    codes = []</div><div class="line"><a name="l00049"></a><span class="lineno"><a class="line" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a06c63b2936ba8b23426ce41472dcbfd4">   49</a></span>&#160;    supported_machines = []</div><div class="line"><a name="l00050"></a><span class="lineno"><a class="line" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a298ec8ce182bf48901b0a40332de3c6d">   50</a></span>&#160;    sweeps = []</div><div class="line"><a name="l00051"></a><span class="lineno"><a class="line" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a95d21ac374c6126edc3c82b8f953b9af">   51</a></span>&#160;    inputs = [] <span class="comment"># copied to top level run directory</span></div><div class="line"><a name="l00052"></a><span class="lineno"><a class="line" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a7923c1c6debd3f7ce3c1730d21cdfb80">   52</a></span>&#160;    umask = <span class="keywordtype">None</span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    <span class="comment"># If set and there are multiple codes making up the application,</span></div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    <span class="comment"># kill all remaining codes if one code fails.</span></div><div class="line"><a name="l00056"></a><span class="lineno"><a class="line" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a1b3525f75cec5b7d738a1aea32c44612">   56</a></span>&#160;    kill_on_partial_failure = <span class="keyword">False</span></div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    <span class="comment"># Optional. If set, passed single argument which is the absolute</span></div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    <span class="comment"># path to a JSON file containing the FOB definition for the run.</span></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    <span class="comment"># The path can be absolute (starts with /), or relative to the</span></div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <span class="comment"># directory containing the spec file (if does not start with /).</span></div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    <span class="comment"># If the script has nonzero exit status, then the entire sweep group</span></div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <span class="comment"># can optionally be stopped. This can be used to detect errors early.</span></div><div class="line"><a name="l00064"></a><span class="lineno"><a class="line" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a86d1217f25978d2210e2ddd6d2a99937">   64</a></span>&#160;    run_post_process_script = <span class="keywordtype">None</span></div><div class="line"><a name="l00065"></a><span class="lineno"><a class="line" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a063e53373a2750fcdbf7eec7ebaa101b">   65</a></span>&#160;    run_post_process_stop_group_on_failure = <span class="keyword">False</span></div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    <span class="comment"># Optional. Designed to set up application specific environment</span></div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <span class="comment"># variables and load environment modules. Must be a dictionary with</span></div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    <span class="comment"># machine name keys and values pointing at bash scripts. The</span></div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    <span class="comment"># appropriate machine script will be sourced before running the workflow</span></div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    <span class="comment"># script, and all the codes in the application will inherit that</span></div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    <span class="comment"># environment. Can be an absolute path, or a path relative to the</span></div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    <span class="comment"># directory containg the campaign definition.</span></div><div class="line"><a name="l00074"></a><span class="lineno"><a class="line" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a434f06408e6b364e0efc232fa107eb33">   74</a></span>&#160;    app_config_scripts = <span class="keywordtype">None</span></div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    <span class="comment"># Script to be run for each run directory. The working dir will be</span></div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    <span class="comment"># set to the run dir and no arguments will be passed. It will be</span></div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <span class="comment"># run as the last step, so all files created by cheetah, like the</span></div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <span class="comment"># FOB file, will be present. If the value is non-None and does not</span></div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <span class="comment"># begin with &#39;/&#39;, the path will be assumed to be relative to the</span></div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <span class="comment"># directory containing the campaign spec.</span></div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <span class="comment"># @TODO: This must be per sweep group</span></div><div class="line"><a name="l00083"></a><span class="lineno"><a class="line" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#aa7d421cedfa8ffb615f6fd8f38b208ef">   83</a></span>&#160;    run_dir_setup_script = <span class="keywordtype">None</span></div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <span class="comment"># Schedular options. Not used when using machine &#39;local&#39;, required</span></div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <span class="comment"># when using super computers.</span></div><div class="line"><a name="l00087"></a><span class="lineno"><a class="line" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a6c58ab5dac64e6ab4796c6e6de6347c7">   87</a></span>&#160;    scheduler_options = {}</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <span class="comment"># None means use default</span></div><div class="line"><a name="l00090"></a><span class="lineno"><a class="line" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a28e44a6ede93e17d40627bd9a31fa8d3">   90</a></span>&#160;    tau_config = <span class="keywordtype">None</span></div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <span class="comment"># None means use &#39;sosd&#39; in the app dir</span></div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <span class="comment"># TODO: make this part of machine config? Or does it make sense to</span></div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <span class="comment"># have per-app binaries for sos?</span></div><div class="line"><a name="l00095"></a><span class="lineno"><a class="line" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#af655e512e1d8b7a3bd5104d890dab023">   95</a></span>&#160;    sosd_path = <span class="keywordtype">None</span></div><div class="line"><a name="l00096"></a><span class="lineno"><a class="line" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a521eea7dac8df14f3ea9174cd6297340">   96</a></span>&#160;    sos_analysis_path = <span class="keywordtype">None</span></div><div class="line"><a name="l00097"></a><span class="lineno"><a class="line" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a8cdebf43b605e4ac036fbf4e0b9e7d15">   97</a></span>&#160;    sosd_num_aggregators = 1</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    <span class="comment"># Optional. If set, passed single argument which is the absolute</span></div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <span class="comment"># path to a JSON file containing all runs. Must be relative to the</span></div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <span class="comment"># app directory, just like codes values. It will be run from the</span></div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <span class="comment"># top level experiment directory.</span></div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <span class="comment"># TODO: this is broken. It should really be a group post process</span></div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <span class="comment"># script now, and it could be passed as an arg to the workflow</span></div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <span class="comment"># script.</span></div><div class="line"><a name="l00106"></a><span class="lineno"><a class="line" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a7452ae0f9b6946a5e531cf6bebd55179">  106</a></span>&#160;    post_process_script = <span class="keywordtype">None</span></div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <span class="comment"># By default the workflow script running on compute nodes in the</span></div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <span class="comment"># campaign will use the same executable (possibly in a virtualenv)</span></div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <span class="comment"># as the cheetah.py command used to create the campaign. If needed,</span></div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <span class="comment"># specs can override this.</span></div><div class="line"><a name="l00112"></a><span class="lineno"><a class="line" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#af71218dfabb60e7f23997a0a8f1e1158">  112</a></span>&#160;    python_path = sys.executable</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <span class="comment"># A file that identifies a directory as a multi-user campaign</span></div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    _id_file = <span class="stringliteral">&quot;.campaign&quot;</span></div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;</div><div class="line"><a name="l00117"></a><span class="lineno"><a class="line" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#ad1b15b5ae37794b2568fe8460f36eab6">  117</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#ad1b15b5ae37794b2568fe8460f36eab6">__init__</a>(self, machine_name, app_dir):</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;        <span class="comment"># check that subclasses set configuration</span></div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;        <span class="comment"># TODO: better errors</span></div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;        <span class="comment"># TODO: is class variables best way to model this??</span></div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;        <span class="keyword">assert</span> self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#abc6944cb247705f1e7059d59537836d0">name</a> <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span></div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;        <span class="keyword">assert</span> len(self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a963d2407a8818742d80cdabd0b462dc6">codes</a>) &gt; 0</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;        <span class="keyword">assert</span> len(self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a06c63b2936ba8b23426ce41472dcbfd4">supported_machines</a>) &gt; 0</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;        <span class="keyword">assert</span> len(self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a298ec8ce182bf48901b0a40332de3c6d">sweeps</a>) &gt; 0</div><div class="line"><a name="l00125"></a><span class="lineno"><a class="line" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a22d066017db80781e962ce372c32bf79">  125</a></span>&#160;        self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a22d066017db80781e962ce372c32bf79">machine</a> = self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#ab86c1861be341dfa601a1e404e8d08c4">_get_machine</a>(machine_name)</div><div class="line"><a name="l00126"></a><span class="lineno"><a class="line" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a0d0c15af5ad8c345542eeba939f15ef6">  126</a></span>&#160;        self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a0d0c15af5ad8c345542eeba939f15ef6">app_dir</a> = os.path.abspath(app_dir)</div><div class="line"><a name="l00127"></a><span class="lineno"><a class="line" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#ade0d3ba84103ebb3c91252576b3c18f1">  127</a></span>&#160;        self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#ade0d3ba84103ebb3c91252576b3c18f1">runs</a> = []</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;        <span class="comment"># allow inputs to be either aboslute paths or relative to</span></div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;        <span class="comment"># app_dir</span></div><div class="line"><a name="l00131"></a><span class="lineno"><a class="line" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a91554c0c4fc9689aea73d47f9b3c991c">  131</a></span>&#160;        self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a95d21ac374c6126edc3c82b8f953b9af">inputs</a> = <a class="code" href="namespacecodar_1_1cheetah_1_1helpers.html#a97a25670924e4a57d6df60a2b4293244">relative_or_absolute_path_list</a>(self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a0d0c15af5ad8c345542eeba939f15ef6">app_dir</a>, self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a95d21ac374c6126edc3c82b8f953b9af">inputs</a>)</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;        <span class="keywordflow">if</span> <span class="keywordflow">not</span> isinstance(self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a963d2407a8818742d80cdabd0b462dc6">codes</a>, OrderedDict):</div><div class="line"><a name="l00134"></a><span class="lineno"><a class="line" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#ab7a9563b8cc62768d19be6a2f4c7772c">  134</a></span>&#160;            self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a963d2407a8818742d80cdabd0b462dc6">codes</a> = OrderedDict(self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a963d2407a8818742d80cdabd0b462dc6">codes</a>)</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;        conflict_names = set(self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a963d2407a8818742d80cdabd0b462dc6">codes</a>.keys()) &amp; RESERVED_CODE_NAMES</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;        <span class="keywordflow">if</span> conflict_names:</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;            <span class="keywordflow">raise</span> <a class="code" href="classcodar_1_1cheetah_1_1exc_1_1_cheetah_exception.html">exc.CheetahException</a>(</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;                <span class="stringliteral">&#39;Code names conflict with reserved names: &#39;</span></div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;                + <span class="stringliteral">&quot;, &quot;</span>.join(str(name) <span class="keywordflow">for</span> name <span class="keywordflow">in</span> conflict_names))</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        <span class="comment"># Resolve relative code exe pahts. Checking for existence is not</span></div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;        <span class="comment"># done until make_experiment_run_dir is called to simplify unit</span></div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        <span class="comment"># testing.</span></div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;        <span class="keywordflow">for</span> code_name, code <span class="keywordflow">in</span> self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a963d2407a8818742d80cdabd0b462dc6">codes</a>.items():</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;            exe_path = code[<span class="stringliteral">&#39;exe&#39;</span>]</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;            <span class="keywordflow">if</span> <span class="keywordflow">not</span> exe_path.startswith(<span class="stringliteral">&#39;/&#39;</span>):</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;                exe_path = os.path.join(self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a0d0c15af5ad8c345542eeba939f15ef6">app_dir</a>, exe_path)</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;                code[<span class="stringliteral">&#39;exe&#39;</span>] = exe_path</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        <span class="keywordflow">if</span> self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a28e44a6ede93e17d40627bd9a31fa8d3">tau_config</a> <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;            self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a28e44a6ede93e17d40627bd9a31fa8d3">tau_config</a> = config.etc_path(<span class="stringliteral">&#39;tau.conf&#39;</span>)</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        <span class="keywordflow">elif</span> <span class="keywordflow">not</span> self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a28e44a6ede93e17d40627bd9a31fa8d3">tau_config</a>.startswith(<span class="stringliteral">&#39;/&#39;</span>):</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;            self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a28e44a6ede93e17d40627bd9a31fa8d3">tau_config</a> = os.path.join(self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a0d0c15af5ad8c345542eeba939f15ef6">app_dir</a>, self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a28e44a6ede93e17d40627bd9a31fa8d3">tau_config</a>)</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;        <span class="keywordflow">if</span> self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a86d1217f25978d2210e2ddd6d2a99937">run_post_process_script</a> <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;            self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a86d1217f25978d2210e2ddd6d2a99937">run_post_process_script</a> = self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a67ffe04ef4a24659ef9199dd4e4b0491">_experiment_relative_path</a>(</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;                                                self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a86d1217f25978d2210e2ddd6d2a99937">run_post_process_script</a>)</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;        <span class="keywordflow">if</span> self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#af655e512e1d8b7a3bd5104d890dab023">sosd_path</a> <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;            self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#af655e512e1d8b7a3bd5104d890dab023">sosd_path</a> = os.path.join(self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a0d0c15af5ad8c345542eeba939f15ef6">app_dir</a>, <span class="stringliteral">&#39;sosd&#39;</span>)</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;        <span class="keywordflow">elif</span> <span class="keywordflow">not</span> self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#af655e512e1d8b7a3bd5104d890dab023">sosd_path</a>.startswith(<span class="stringliteral">&#39;/&#39;</span>):</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;            self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#af655e512e1d8b7a3bd5104d890dab023">sosd_path</a> = os.path.join(self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a0d0c15af5ad8c345542eeba939f15ef6">app_dir</a>, self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#af655e512e1d8b7a3bd5104d890dab023">sosd_path</a>)</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;        <span class="keywordflow">if</span> self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a521eea7dac8df14f3ea9174cd6297340">sos_analysis_path</a> <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;            self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a521eea7dac8df14f3ea9174cd6297340">sos_analysis_path</a> = os.path.join(self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a0d0c15af5ad8c345542eeba939f15ef6">app_dir</a>,</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;                                                  <span class="stringliteral">&#39;sos_wrapper.sh&#39;</span>)</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;        <span class="keywordflow">elif</span> <span class="keywordflow">not</span> self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a521eea7dac8df14f3ea9174cd6297340">sos_analysis_path</a>.startswith(<span class="stringliteral">&#39;/&#39;</span>):</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;            self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a521eea7dac8df14f3ea9174cd6297340">sos_analysis_path</a> = os.path.join(self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a0d0c15af5ad8c345542eeba939f15ef6">app_dir</a>,</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;                                                  self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a521eea7dac8df14f3ea9174cd6297340">sos_analysis_path</a>)</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;        o = self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a6c58ab5dac64e6ab4796c6e6de6347c7">scheduler_options</a>.get(machine_name, {})</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        <span class="comment"># TODO: deeper validation with knowledge of scheduler</span></div><div class="line"><a name="l00174"></a><span class="lineno"><a class="line" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a1c6c7a99c27b5ed80721cb4a2328446f">  174</a></span>&#160;        self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a1c6c7a99c27b5ed80721cb4a2328446f">machine_scheduler_options</a> = self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a22d066017db80781e962ce372c32bf79">machine</a>.get_scheduler_options(o)</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;        <span class="keywordflow">if</span> self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#aa7d421cedfa8ffb615f6fd8f38b208ef">run_dir_setup_script</a> <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;            self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#aa7d421cedfa8ffb615f6fd8f38b208ef">run_dir_setup_script</a> = self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a67ffe04ef4a24659ef9199dd4e4b0491">_experiment_relative_path</a>(</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;                                                self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#aa7d421cedfa8ffb615f6fd8f38b208ef">run_dir_setup_script</a>)</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;</div><div class="line"><a name="l00180"></a><span class="lineno"><a class="line" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#aa7fbc79a48f35a16bb12db12bef77a20">  180</a></span>&#160;        self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#aa7fbc79a48f35a16bb12db12bef77a20">machine_app_config_script</a> = <span class="keywordtype">None</span></div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        <span class="keywordflow">if</span> self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a434f06408e6b364e0efc232fa107eb33">app_config_scripts</a> <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;            <span class="keyword">assert</span> isinstance(self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a434f06408e6b364e0efc232fa107eb33">app_config_scripts</a>, dict)</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;            script = self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a434f06408e6b364e0efc232fa107eb33">app_config_scripts</a>.get(machine_name)</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;            <span class="keywordflow">if</span> script <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;                self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#aa7fbc79a48f35a16bb12db12bef77a20">machine_app_config_script</a> = \</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;                    self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a67ffe04ef4a24659ef9199dd4e4b0491">_experiment_relative_path</a>(script)</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <span class="keyword">def </span>_get_machine(self, machine_name):</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        machine = <span class="keywordtype">None</span></div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;        <span class="keywordflow">for</span> m <span class="keywordflow">in</span> self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a06c63b2936ba8b23426ce41472dcbfd4">supported_machines</a>:</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;            <span class="keywordflow">if</span> m == machine_name:</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;                machine = machines.get_by_name(m)</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;        <span class="keywordflow">if</span> machine <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;            <span class="keywordflow">raise</span> <a class="code" href="classcodar_1_1cheetah_1_1exc_1_1_cheetah_exception.html">exc.CheetahException</a>(</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;                <span class="stringliteral">&quot;machine &#39;%s&#39; not supported by experiment &#39;%s&#39;&quot;</span></div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;                % (machine_name, self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#abc6944cb247705f1e7059d59537836d0">name</a>))</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;        <span class="keywordflow">return</span> machine</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;</div><div class="line"><a name="l00199"></a><span class="lineno"><a class="line" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a09266b3421f37a82d8e12c1272e3f54b">  199</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a09266b3421f37a82d8e12c1272e3f54b">make_experiment_run_dir</a>(self, output_dir, _check_code_paths=True):</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;Produce scripts and directory structure for running the experiment.</span></div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;<span class="stringliteral">        Directory structure will be a subdirectory for each scheduler group,</span></div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;<span class="stringliteral">        and within each scheduler group directory, a subdirectory for each</span></div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;<span class="stringliteral">        run.&quot;&quot;&quot;</span></div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;        <span class="comment"># set to False for unit tests</span></div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;        <span class="keywordflow">if</span> _check_code_paths:</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;            self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#aa20562ca5ab807497efaeccdbdf78c45">_check_code_paths</a>()</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;        <span class="keywordflow">if</span> self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a7923c1c6debd3f7ce3c1730d21cdfb80">umask</a>:</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;            umask_int = int(self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a7923c1c6debd3f7ce3c1730d21cdfb80">umask</a>, 8)</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;            <span class="keywordflow">if</span> ((umask_int &amp; stat.S_IXUSR) <span class="keywordflow">or</span> (umask_int &amp; stat.S_IRUSR)):</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;                <span class="keywordflow">raise</span> <a class="code" href="classcodar_1_1cheetah_1_1exc_1_1_cheetah_exception.html">exc.CheetahException</a>(</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;                        <span class="stringliteral">&#39;bad umask, user r-x must be allowed&#39;</span>)</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;            os.umask(umask_int)</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;        <span class="comment"># Create the top level campaign directory</span></div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        _output_dir = os.path.abspath(output_dir)</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;        os.makedirs(_output_dir, exist_ok=<span class="keyword">True</span>)</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;        <span class="comment"># Write campaign id file at the top-level campaign directory</span></div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;        id_fpath = os.path.join(_output_dir, self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a7433ef9d22eaf392a8c006b5c3a0b9c2">_id_file</a>)</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;        Path(id_fpath).touch()</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        <span class="comment"># Create a directory for the user and set it as the campaign location</span></div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;        output_dir = os.path.join(_output_dir, getpass.getuser())</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;        run_all_script = os.path.join(config.CHEETAH_PATH_SCHEDULER,</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;                                      self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a22d066017db80781e962ce372c32bf79">machine</a>.scheduler_name,</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;                                      <span class="stringliteral">&#39;run-all.sh&#39;</span>)</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;        os.makedirs(output_dir, exist_ok=<span class="keyword">True</span>)</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;        <span class="comment"># Check if campaign dir already has groups with the same name</span></div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;        self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a0bb7182008a8afa311fe8f96250b64b4">_assert_unique_group_names</a>(output_dir)</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;        <span class="comment"># Create run script and campaign environment info file</span></div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;        <a class="code" href="namespacecodar_1_1cheetah_1_1helpers.html#a229590ddcb3ea80584a1bd54503b852d">copy_to_dir</a>(run_all_script, output_dir)</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;        campaign_env = templates.CAMPAIGN_ENV_TEMPLATE.format(</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;            experiment_dir=output_dir,</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;            machine_config=config.machine_submit_env_path(self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a22d066017db80781e962ce372c32bf79">machine</a>.name),</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;            app_config=self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#aa7fbc79a48f35a16bb12db12bef77a20">machine_app_config_script</a> <span class="keywordflow">or</span> <span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;            workflow_script_path=config.WORKFLOW_SCRIPT,</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;            workflow_runner=self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a22d066017db80781e962ce372c32bf79">machine</a>.runner_name,</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;            workflow_debug_level=<span class="stringliteral">&quot;DEBUG&quot;</span>,</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;            umask=(self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a7923c1c6debd3f7ce3c1730d21cdfb80">umask</a> <span class="keywordflow">or</span> <span class="stringliteral">&quot;&quot;</span>),</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;            codar_python=self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#af71218dfabb60e7f23997a0a8f1e1158">python_path</a>,</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;        )</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;        campaign_env_path = os.path.join(output_dir, <span class="stringliteral">&#39;campaign-env.sh&#39;</span>)</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;        with open(campaign_env_path, <span class="stringliteral">&#39;w&#39;</span>) <span class="keyword">as</span> f:</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;            f.write(campaign_env)</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;        <span class="comment"># Traverse through sweep groups</span></div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;        <span class="keywordflow">for</span> group_i, group <span class="keywordflow">in</span> enumerate(self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a298ec8ce182bf48901b0a40332de3c6d">sweeps</a>):</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;            <span class="comment"># each scheduler group gets it&#39;s own subdir</span></div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;            <span class="comment"># TODO: support alternate template for dirs?</span></div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;            group_name = group.name</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;            group_output_dir = os.path.join(output_dir, group_name)</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;            launcher = machine_launchers.get_launcher(self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a22d066017db80781e962ce372c32bf79">machine</a>,</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;                                                      group_output_dir,</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;                                                      len(self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a963d2407a8818742d80cdabd0b462dc6">codes</a>))</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;            group_runs = []</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;            <span class="keywordflow">for</span> repeat_index <span class="keywordflow">in</span> range(0, group.run_repetitions+1):</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;                group_run_offset = 0</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;                <span class="keywordflow">for</span> sweep <span class="keywordflow">in</span> group.parameter_groups:</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;                    <span class="comment"># node layout is map of machine names to layout for each</span></div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;                    <span class="comment"># machine. If unspecified, or certain machine is</span></div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;                    <span class="comment"># unspecified, use default.</span></div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;                    <span class="keywordflow">if</span> sweep.node_layout <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;                        node_layout = <span class="keywordtype">None</span></div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;                    <span class="keywordflow">else</span>:</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;                        node_layout = sweep.node_layout.get(self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a22d066017db80781e962ce372c32bf79">machine</a>.name)</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;                    <span class="keywordflow">if</span> node_layout <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;                        node_layout = NodeLayout.default_no_share_layout(</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;                                            self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a22d066017db80781e962ce372c32bf79">machine</a>.processes_per_node,</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;                                            self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a963d2407a8818742d80cdabd0b462dc6">codes</a>.keys())</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;                    <span class="keywordflow">else</span>:</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;                        node_layout = <a class="code" href="classcodar_1_1savanna_1_1node__layout_1_1_node_layout.html">NodeLayout</a>(node_layout)</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;                    <span class="comment"># TODO: validate node layout against machine model</span></div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;                    <span class="comment"># Summit override. Don&#39;t support MPMD yet.</span></div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;                    <span class="keywordflow">if</span> self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a22d066017db80781e962ce372c32bf79">machine</a>.name.lower() == <span class="stringliteral">&quot;summit&quot;</span>:</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;                        <span class="keywordflow">if</span> group.launch_mode:</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;                            <span class="keywordflow">if</span> group.launch_mode.lower() == <span class="stringliteral">&#39;mpmd&#39;</span>:</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;                                print(<span class="stringliteral">&quot;MPMD not supported on Summit yet.&quot;</span></div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;                                      <span class="stringliteral">&quot;Changing to default launch mode.&quot;</span>)</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;                                group.launch_mode = <span class="stringliteral">&#39;default&#39;</span></div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;                    sweep_runs = [<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run.html">Run</a>(inst, self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a963d2407a8818742d80cdabd0b462dc6">codes</a>, self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a0d0c15af5ad8c345542eeba939f15ef6">app_dir</a>,</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;                                      os.path.join(</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;                                          group_output_dir,</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;                                          <span class="stringliteral">&#39;run-{}.iteration-{}&#39;</span>.format(</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;                                              group_run_offset + i,</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;                                              repeat_index)),</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;                                      self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a95d21ac374c6126edc3c82b8f953b9af">inputs</a>,</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;                                      self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a22d066017db80781e962ce372c32bf79">machine</a>,</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;                                      node_layout,</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;                                      sweep.rc_dependency,</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;                                      group.component_subdirs,</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;                                      group.sosflow_profiling,</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;                                      group.sosflow_analysis,</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;                                      group.component_inputs)</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;                                  <span class="keywordflow">for</span> i, inst <span class="keywordflow">in</span> enumerate(</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;                            sweep.get_instances())]</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;                    group_runs.extend(sweep_runs)</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;                    group_run_offset += len(sweep_runs)</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;            self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#ade0d3ba84103ebb3c91252576b3c18f1">runs</a>.extend(group_runs)</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;            <span class="keywordflow">if</span> group.max_procs <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;                max_procs = max([r.get_total_nprocs() <span class="keywordflow">for</span> r <span class="keywordflow">in</span> group_runs])</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;            <span class="keywordflow">else</span>:</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;                procs_per_run = max([r.get_total_nprocs() <span class="keywordflow">for</span> r <span class="keywordflow">in</span> group_runs])</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;                <span class="keywordflow">if</span> group.max_procs &lt; procs_per_run:</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;                    <span class="comment"># TODO: improve error message, specifying which</span></div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;                    <span class="comment"># group and by how much it&#39;s off etc</span></div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;                    <span class="keywordflow">raise</span> <a class="code" href="classcodar_1_1cheetah_1_1exc_1_1_cheetah_exception.html">exc.CheetahException</a>(<span class="stringliteral">&quot;max_procs for group is too low&quot;</span>)</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;                max_procs = group.max_procs</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;            <span class="keywordflow">if</span> group.per_run_timeout:</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;                per_run_seconds = <a class="code" href="namespacecodar_1_1cheetah_1_1helpers.html#aefd230bdcbba1681b70244f39310b68b">parse_timedelta_seconds</a>(group.per_run_timeout)</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;                walltime_guess = (per_run_seconds * len(group_runs)) + 60</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;                walltime_group = <a class="code" href="namespacecodar_1_1cheetah_1_1helpers.html#aefd230bdcbba1681b70244f39310b68b">parse_timedelta_seconds</a>(group.walltime)</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;                <span class="keywordflow">if</span> walltime_group &lt; walltime_guess:</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;                    warnings.warn(<span class="stringliteral">&#39;group &quot;%s&quot; walltime %d is less than &#39;</span></div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;                                  <span class="stringliteral">&#39;(per_run_timeout * nruns) + 60 = %d, &#39;</span></div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;                                  <span class="stringliteral">&#39;it is recommended to set it higher to &#39;</span></div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;                                  <span class="stringliteral">&#39;avoid problems with the workflow &#39;</span></div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;                                  <span class="stringliteral">&#39;engine being killed before it can write &#39;</span></div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;                                  <span class="stringliteral">&#39;all status information&#39;</span></div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;                                % (group.name, walltime_group, walltime_guess))</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;            <span class="comment"># TODO: refactor so we can just pass the campaign and group</span></div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;            <span class="comment"># objects, i.e. add methods so launcher can get all info it needs</span></div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;            <span class="comment"># and simplify this loop.</span></div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;            group.nodes = launcher.create_group_directory(</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;                self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#abc6944cb247705f1e7059d59537836d0">name</a>, self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a0d0c15af5ad8c345542eeba939f15ef6">app_dir</a>, group_name,</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;                group_runs,</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;                max_procs,</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;                nodes=group.nodes,</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;                launch_mode=group.launch_mode,</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;                component_subdirs=group.component_subdirs,</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;                walltime=group.walltime,</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;                timeout=group.per_run_timeout,</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;                node_exclusive=self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a22d066017db80781e962ce372c32bf79">machine</a>.node_exclusive,</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;                tau_config=self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a28e44a6ede93e17d40627bd9a31fa8d3">tau_config</a>,</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;                machine=self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a22d066017db80781e962ce372c32bf79">machine</a>,</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;                sosd_path=self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#af655e512e1d8b7a3bd5104d890dab023">sosd_path</a>,</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;                sos_analysis_path=self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a521eea7dac8df14f3ea9174cd6297340">sos_analysis_path</a>,</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;                kill_on_partial_failure=self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a1b3525f75cec5b7d738a1aea32c44612">kill_on_partial_failure</a>,</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;                run_post_process_script=self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a86d1217f25978d2210e2ddd6d2a99937">run_post_process_script</a>,</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;                run_post_process_stop_on_failure=</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;                    self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a063e53373a2750fcdbf7eec7ebaa101b">run_post_process_stop_group_on_failure</a>,</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;                scheduler_options=self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a1c6c7a99c27b5ed80721cb4a2328446f">machine_scheduler_options</a>,</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;                run_dir_setup_script=self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#aa7d421cedfa8ffb615f6fd8f38b208ef">run_dir_setup_script</a>)</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;        <span class="comment"># TODO: track directories and ids and add to this file</span></div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;        all_params_json_path = os.path.join(output_dir, <span class="stringliteral">&quot;params.json&quot;</span>)</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;        with open(all_params_json_path, <span class="stringliteral">&quot;w&quot;</span>) <span class="keyword">as</span> f:</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;            json.dump([run.get_app_param_dict()</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;                       <span class="keywordflow">for</span> run <span class="keywordflow">in</span> self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#ade0d3ba84103ebb3c91252576b3c18f1">runs</a>], f, indent=2)</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    <span class="keyword">def </span>_check_code_paths(self):</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;        <span class="keywordflow">if</span> <span class="keywordflow">not</span> os.path.isdir(self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a0d0c15af5ad8c345542eeba939f15ef6">app_dir</a>):</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;            <span class="keywordflow">raise</span> <a class="code" href="classcodar_1_1cheetah_1_1exc_1_1_cheetah_exception.html">exc.CheetahException</a>(</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;                <span class="stringliteral">&#39;specified app directory &quot;%s&quot; does not exist&#39;</span> % self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a0d0c15af5ad8c345542eeba939f15ef6">app_dir</a>)</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;        <span class="keywordflow">for</span> code_name, code <span class="keywordflow">in</span> self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a963d2407a8818742d80cdabd0b462dc6">codes</a>.items():</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;            exe_path = code[<span class="stringliteral">&#39;exe&#39;</span>]</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;            <span class="keywordflow">if</span> <span class="keywordflow">not</span> os.path.isfile(exe_path):</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;                <span class="keywordflow">raise</span> <a class="code" href="classcodar_1_1cheetah_1_1exc_1_1_cheetah_exception.html">exc.CheetahException</a>(</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;                    <span class="stringliteral">&#39;code &quot;%s&quot; exe at &quot;%s&quot; is not a file&#39;</span></div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;                    % (code_name, exe_path))</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;            <span class="keywordflow">if</span> <span class="keywordflow">not</span> os.access(exe_path, os.X_OK):</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;                <span class="keywordflow">raise</span> <a class="code" href="classcodar_1_1cheetah_1_1exc_1_1_cheetah_exception.html">exc.CheetahException</a>(</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;                    <span class="stringliteral">&#39;code &quot;%s&quot; exe at &quot;%s&quot; is not executable by current user&#39;</span></div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;                    % (code_name, exe_path))</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    <span class="keyword">def </span>_assert_unique_group_names(self, campaign_dir):</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;Assert new groups being added to the campaign do not have the</span></div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;<span class="stringliteral">        same name as existing groups.</span></div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;        requested_group_names = []</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;        <span class="keywordflow">for</span> group_i, group <span class="keywordflow">in</span> enumerate(self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a298ec8ce182bf48901b0a40332de3c6d">sweeps</a>):</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;            <span class="keywordflow">if</span> <span class="keywordflow">not</span> isinstance(group, <a class="code" href="classcodar_1_1cheetah_1_1parameters_1_1_sweep_group.html">parameters.SweepGroup</a>):</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;                <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&quot;top level run groups must be SweepGroup&quot;</span>)</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;            requested_group_names.append(group.name)</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;        existing_groups = next(os.walk(campaign_dir))[1]</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;        common_groups = set(requested_group_names) &amp; set(existing_groups)</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;        <span class="keywordflow">if</span> common_groups:</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;            <span class="keywordflow">raise</span> FileExistsError(<span class="stringliteral">&quot;One or more SweepGroups already exist: &quot;</span></div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;                                  + <span class="stringliteral">&quot;, &quot;</span>.join(common_groups))</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    <span class="keyword">def </span>_experiment_relative_path(self, p):</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;        <span class="keywordflow">if</span> p.startswith(<span class="stringliteral">&quot;/&quot;</span>):</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;            <span class="keywordflow">return</span> p</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;        experiment_spec_path = inspect.getsourcefile(self.__class__)</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;        experiment_dir = os.path.dirname(experiment_spec_path)</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;        <span class="keywordflow">return</span> os.path.join(experiment_dir, p)</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;</div><div class="line"><a name="l00401"></a><span class="lineno"><a class="line" href="classcodar_1_1cheetah_1_1model_1_1_run.html">  401</a></span>&#160;<span class="keyword">class </span><a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run.html">Run</a>(object):</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;<span class="stringliteral">    Class representing how to actually run an instance on a given environment,</span></div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;<span class="stringliteral">    including how to generate arg arrays for executing each code required for</span></div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;<span class="stringliteral">    the application.</span></div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;<span class="stringliteral">    TODO: create a model shared between workflow and cheetah, i.e. codar.model</span></div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;<span class="stringliteral">    &quot;&quot;&quot;</span></div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    <span class="keyword">def </span><a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run.html#a6b83070bbd7f8675be9f9ff7e91cadff">__init__</a>(self, instance, codes, codes_path, run_path, inputs,</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;                 machine, node_layout, rc_dependency, component_subdirs,</div><div class="line"><a name="l00411"></a><span class="lineno"><a class="line" href="classcodar_1_1cheetah_1_1model_1_1_run.html#a6b83070bbd7f8675be9f9ff7e91cadff">  411</a></span>&#160;                 sosflow_profiling, sosflow_analyis, component_inputs=None):</div><div class="line"><a name="l00412"></a><span class="lineno"><a class="line" href="classcodar_1_1cheetah_1_1model_1_1_run.html#af2c8be223aa9290089e020cffec6f531">  412</a></span>&#160;        self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run.html#af2c8be223aa9290089e020cffec6f531">instance</a> = instance</div><div class="line"><a name="l00413"></a><span class="lineno"><a class="line" href="classcodar_1_1cheetah_1_1model_1_1_run.html#a3d4ea1b22ffc7b7cecd6b7ee0e48301e">  413</a></span>&#160;        self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run.html#a3d4ea1b22ffc7b7cecd6b7ee0e48301e">codes</a> = codes</div><div class="line"><a name="l00414"></a><span class="lineno"><a class="line" href="classcodar_1_1cheetah_1_1model_1_1_run.html#ad61ae023de5960c8bdbfd8437daafda2">  414</a></span>&#160;        self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run.html#ad61ae023de5960c8bdbfd8437daafda2">codes_path</a> = codes_path</div><div class="line"><a name="l00415"></a><span class="lineno"><a class="line" href="classcodar_1_1cheetah_1_1model_1_1_run.html#a33e213b156b3b22e68738ce5c0942044">  415</a></span>&#160;        self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run.html#a33e213b156b3b22e68738ce5c0942044">run_path</a> = run_path</div><div class="line"><a name="l00416"></a><span class="lineno"><a class="line" href="classcodar_1_1cheetah_1_1model_1_1_run.html#ac8268174ba2fba6a0f8437d44f991331">  416</a></span>&#160;        self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run.html#ac8268174ba2fba6a0f8437d44f991331">run_id</a> = os.path.basename(run_path)</div><div class="line"><a name="l00417"></a><span class="lineno"><a class="line" href="classcodar_1_1cheetah_1_1model_1_1_run.html#a9b663454e66c7bd398e7f5f4bf9fcbed">  417</a></span>&#160;        self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run.html#a9b663454e66c7bd398e7f5f4bf9fcbed">inputs</a> = inputs</div><div class="line"><a name="l00418"></a><span class="lineno"><a class="line" href="classcodar_1_1cheetah_1_1model_1_1_run.html#a1be34ccf48758dc37ffde2d5d2680bfa">  418</a></span>&#160;        self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run.html#a1be34ccf48758dc37ffde2d5d2680bfa">machine</a> = machine</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;        <span class="comment"># Note: the layout will be modified if sosflow is set, so it&#39;s</span></div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;        <span class="comment"># important to use a copy.</span></div><div class="line"><a name="l00421"></a><span class="lineno"><a class="line" href="classcodar_1_1cheetah_1_1model_1_1_run.html#a564be04cf0e1030d650f3ba89764e102">  421</a></span>&#160;        self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run.html#a564be04cf0e1030d650f3ba89764e102">node_layout</a> = node_layout.copy()</div><div class="line"><a name="l00422"></a><span class="lineno"><a class="line" href="classcodar_1_1cheetah_1_1model_1_1_run.html#a1d1e212876736c32d9c2bb446f79a655">  422</a></span>&#160;        self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run.html#a1d1e212876736c32d9c2bb446f79a655">component_subdirs</a> = component_subdirs</div><div class="line"><a name="l00423"></a><span class="lineno"><a class="line" href="classcodar_1_1cheetah_1_1model_1_1_run.html#ac73191d8724dfa774f8c52df30007c11">  423</a></span>&#160;        self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run.html#ac73191d8724dfa774f8c52df30007c11">sosflow_profiling</a> = sosflow_profiling</div><div class="line"><a name="l00424"></a><span class="lineno"><a class="line" href="classcodar_1_1cheetah_1_1model_1_1_run.html#a5713827ad4bde77d4fcf46c05f10b554">  424</a></span>&#160;        self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run.html#a5713827ad4bde77d4fcf46c05f10b554">sosflow_analysis</a> = sosflow_analyis</div><div class="line"><a name="l00425"></a><span class="lineno"><a class="line" href="classcodar_1_1cheetah_1_1model_1_1_run.html#aef7a539e9aa216737394edbdcf0ea726">  425</a></span>&#160;        self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run.html#aef7a539e9aa216737394edbdcf0ea726">component_inputs</a> = component_inputs</div><div class="line"><a name="l00426"></a><span class="lineno"><a class="line" href="classcodar_1_1cheetah_1_1model_1_1_run.html#a441a213a4a37f8cde9db77ecb9a72e89">  426</a></span>&#160;        self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run.html#a441a213a4a37f8cde9db77ecb9a72e89">total_nodes</a> = 0</div><div class="line"><a name="l00427"></a><span class="lineno"><a class="line" href="classcodar_1_1cheetah_1_1model_1_1_run.html#a88ee35c04cfd039b398f131a50949305">  427</a></span>&#160;        self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run.html#a88ee35c04cfd039b398f131a50949305">run_components</a> = self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run.html#ae44eabdd8697736d7f67cbe22e47c3d8">_get_run_components</a>()</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;        <span class="comment"># populate nodelayout to contain all RCs</span></div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;        self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run.html#a564be04cf0e1030d650f3ba89764e102">node_layout</a>.populate_remaining([rc.name <span class="keywordflow">for</span> rc <span class="keywordflow">in</span></div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;                                             self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run.html#a88ee35c04cfd039b398f131a50949305">run_components</a>],</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;                                            self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run.html#a1be34ccf48758dc37ffde2d5d2680bfa">machine</a>.processes_per_node)</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;        <span class="comment"># Get the RCs that this rc depends on</span></div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;        <span class="comment"># This must be done before the total no. of nodes are calculated</span></div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;        <span class="comment"># below</span></div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;        self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run.html#abd8e72c6b76e5dc835494de437353ed8">_populate_rc_dependency</a>(rc_dependency)</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;        <span class="comment"># Set the total nodes after the run components are initialized above</span></div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;        self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run.html#abff987dfad4500fe7875c52f964c73c2">_set_total_nodes</a>()</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;        <span class="comment"># Filename in the run dir that will store the size of the run dir</span></div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;        <span class="comment"># prior to submitting the campaign</span></div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;        self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run.html#ac8ed0b936f206cd76d3364db0698a5c7">_pre_submit_dir_size_fname</a> = \</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;            <span class="stringliteral">&quot;.codar.cheetah.pre_submit_dir_size.out&quot;</span></div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    <span class="keyword">def </span>_get_run_components(self):</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;        comps = []</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;        codes_argv = self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run.html#a9984eba5c5e066d44c2e1b825f800d63">_get_codes_argv_ordered</a>()</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;        <span class="keywordflow">for</span> (target, argv) <span class="keywordflow">in</span> codes_argv.items():</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;            exe_path = self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run.html#a3d4ea1b22ffc7b7cecd6b7ee0e48301e">codes</a>[target][<span class="stringliteral">&#39;exe&#39;</span>]</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;            sleep_after = self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run.html#a3d4ea1b22ffc7b7cecd6b7ee0e48301e">codes</a>[target].get(<span class="stringliteral">&#39;sleep_after&#39;</span>, 0)</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;            runner_override = self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run.html#a3d4ea1b22ffc7b7cecd6b7ee0e48301e">codes</a>[target].get(<span class="stringliteral">&#39;runner_override&#39;</span>, <span class="keyword">False</span>)</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;            <span class="keyword">assert</span> type(runner_override) == bool, \</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;                <span class="stringliteral">&quot;The runner_override property for the &quot;</span> + target + <span class="stringliteral">&quot; codes &quot;</span> \</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;                <span class="stringliteral">&quot;object must be a boolean value True/False&quot;</span></div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;            <span class="comment"># Set separate subdirs for individual components if requested</span></div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;            <span class="keywordflow">if</span> self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run.html#a1d1e212876736c32d9c2bb446f79a655">component_subdirs</a>:</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;                working_dir = os.path.join(self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run.html#a33e213b156b3b22e68738ce5c0942044">run_path</a>, target)</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;            <span class="keywordflow">else</span>:</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;                working_dir = self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run.html#a33e213b156b3b22e68738ce5c0942044">run_path</a></div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;            component_inputs = <span class="keywordtype">None</span></div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;            <span class="keywordflow">if</span> self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run.html#aef7a539e9aa216737394edbdcf0ea726">component_inputs</a>:</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;                component_inputs = self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run.html#aef7a539e9aa216737394edbdcf0ea726">component_inputs</a>.get(target)</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;            <span class="keywordflow">if</span> component_inputs:</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;                <span class="comment"># Get the full path of inputs</span></div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;                <span class="comment"># Separate the strings from symlinks to preserve their type</span></div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;                str_inputs = [input <span class="keywordflow">for</span> input <span class="keywordflow">in</span> component_inputs <span class="keywordflow">if</span> type(</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;                    input) == str]</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;                str_inputs = <a class="code" href="namespacecodar_1_1cheetah_1_1helpers.html#a97a25670924e4a57d6df60a2b4293244">relative_or_absolute_path_list</a>(self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run.html#ad61ae023de5960c8bdbfd8437daafda2">codes_path</a>,</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;                                                            str_inputs)</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;                symlinks = [input <span class="keywordflow">for</span> input <span class="keywordflow">in</span> component_inputs <span class="keywordflow">if</span> type(</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;                    input) == SymLink]</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;                symlinks = <a class="code" href="namespacecodar_1_1cheetah_1_1helpers.html#a97a25670924e4a57d6df60a2b4293244">relative_or_absolute_path_list</a>(self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run.html#ad61ae023de5960c8bdbfd8437daafda2">codes_path</a>,</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;                                                          symlinks)</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;                symlinks = [<a class="code" href="classcodar_1_1cheetah_1_1parameters_1_1_sym_link.html">SymLink</a>(input) <span class="keywordflow">for</span> input <span class="keywordflow">in</span> symlinks]</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;                component_inputs = str_inputs + symlinks</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;            linked_with_sosflow = self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run.html#a3d4ea1b22ffc7b7cecd6b7ee0e48301e">codes</a>[target].get(</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;                <span class="stringliteral">&#39;linked_with_sosflow&#39;</span>, <span class="keyword">False</span>)</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;            adios_xml_file = self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run.html#a3d4ea1b22ffc7b7cecd6b7ee0e48301e">codes</a>[target].get(<span class="stringliteral">&#39;adios_xml_file&#39;</span>, <span class="keywordtype">None</span>)</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;            <span class="keywordflow">if</span> adios_xml_file:</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;                adios_xml_file = <a class="code" href="namespacecodar_1_1cheetah_1_1helpers.html#a23099409c04805468db73bd84ee21cb3">relative_or_absolute_path</a>(</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;                    self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run.html#ad61ae023de5960c8bdbfd8437daafda2">codes_path</a>, adios_xml_file)</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;            sched_args = self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run.html#af2c8be223aa9290089e020cffec6f531">instance</a>.get_sched_opts(target)</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;            comp = <a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run_component.html">RunComponent</a>(name=target, exe=exe_path, args=argv,</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;                                sched_args=sched_args,</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;                                nprocs=self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run.html#af2c8be223aa9290089e020cffec6f531">instance</a>.get_nprocs(target),</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;                                sleep_after=sleep_after,</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;                                working_dir=working_dir,</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;                                component_inputs=component_inputs,</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;                                linked_with_sosflow=linked_with_sosflow,</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;                                adios_xml_file=adios_xml_file,</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;                                hostfile=self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run.html#af2c8be223aa9290089e020cffec6f531">instance</a>.get_hostfile(target),</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;                                runner_override=runner_override)</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;            comps.append(comp)</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;        <span class="keywordflow">return</span> comps</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    <span class="keyword">def </span>_populate_rc_dependency(self, rc_dependency):</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;<span class="stringliteral">        Retrieve the object reference for RCs and populate their</span></div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;<span class="stringliteral">        after_rc_done field with object references</span></div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;        <span class="keywordflow">if</span> rc_dependency <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;            <span class="keywordflow">for</span> k,v <span class="keywordflow">in</span> rc_dependency.items():</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;                <span class="keyword">assert</span> type(k) <span class="keywordflow">is</span> str, <span class="stringliteral">&quot;rc_dependency dictionary key must &quot;</span> \</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;                                        <span class="stringliteral">&quot;be code name&quot;</span></div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;                <span class="keyword">assert</span> v <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>, <span class="stringliteral">&quot;Dict value cannot be None&quot;</span></div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;                <span class="keyword">assert</span> type(v) <span class="keywordflow">is</span> str, <span class="stringliteral">&quot;rc_dependency dictionary value must &quot;</span> \</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;                                       <span class="stringliteral">&quot;be a string&quot;</span></div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;                k_rc = self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run.html#a5f2faffde66c1f4823690f0e34305e36">_get_rc_by_name</a>(k)</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;                v_rc = self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run.html#a5f2faffde66c1f4823690f0e34305e36">_get_rc_by_name</a>(v)</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;                k_rc.after_rc_done = v_rc</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;                <span class="comment"># k_rc = self._get_rc_by_name(k)</span></div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;                <span class="comment"># assert k_rc is not None, &quot;RC {0} not found&quot;.format(k)</span></div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;                <span class="comment"># v_rc = self._get_rc_by_name(v)</span></div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;                <span class="comment"># assert v_rc is not None, &quot;RC {0} not found&quot;.format(v)</span></div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;                <span class="comment"># k_rc.after_rc_done = v_rc</span></div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;</div><div class="line"><a name="l00528"></a><span class="lineno"><a class="line" href="classcodar_1_1cheetah_1_1model_1_1_run.html#a8d10cb20808cc4c66a59f949ec40aeb8">  528</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run.html#a8d10cb20808cc4c66a59f949ec40aeb8">get_fob_data_list</a>(self):</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;        <span class="keywordflow">return</span> [comp.as_fob_data() <span class="keywordflow">for</span> comp <span class="keywordflow">in</span> self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run.html#a88ee35c04cfd039b398f131a50949305">run_components</a>]</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;    <span class="keyword">def </span>_get_codes_argv_ordered(self):</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;Wrapper around instance.get_codes_argv which uses correct order</span></div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;<span class="stringliteral">        from self.codes OrderedDict.&quot;&quot;&quot;</span></div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;        codes_argv = self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run.html#af2c8be223aa9290089e020cffec6f531">instance</a>.get_codes_argv()</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;        undefined_codes = set(codes_argv.keys()) - set(self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run.html#a3d4ea1b22ffc7b7cecd6b7ee0e48301e">codes</a>.keys())</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;        <span class="keywordflow">if</span> undefined_codes:</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;            <span class="keywordflow">raise</span> <a class="code" href="classcodar_1_1cheetah_1_1exc_1_1_campaign_parse_error.html">exc.CampaignParseError</a>(</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;                <span class="stringliteral">&#39;Parameter references undefined codes(s): %s&#39;</span></div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;                % <span class="stringliteral">&#39;,&#39;</span>.join(undefined_codes))</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;        <span class="comment"># Note that a given Run may not use all codes, e.g. for base</span></div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;        <span class="comment"># case app runs that don&#39;t use adios stage_write or dataspaces.</span></div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;        <span class="keywordflow">return</span> OrderedDict((k, codes_argv[k]) <span class="keywordflow">for</span> k <span class="keywordflow">in</span> self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run.html#a3d4ea1b22ffc7b7cecd6b7ee0e48301e">codes</a>.keys()</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;                           <span class="keywordflow">if</span> k <span class="keywordflow">in</span> codes_argv)</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;</div><div class="line"><a name="l00545"></a><span class="lineno"><a class="line" href="classcodar_1_1cheetah_1_1model_1_1_run.html#af56a27848d2d8b900435b462ac6b74d8">  545</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run.html#af56a27848d2d8b900435b462ac6b74d8">get_total_nprocs</a>(self):</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;        <span class="keywordflow">return</span> sum(rc.nprocs <span class="keywordflow">for</span> rc <span class="keywordflow">in</span> self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run.html#a88ee35c04cfd039b398f131a50949305">run_components</a>)</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;    <span class="keyword">def </span>_get_rc_by_name(self, name):</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;        <span class="keywordflow">for</span> rc <span class="keywordflow">in</span> self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run.html#a88ee35c04cfd039b398f131a50949305">run_components</a>:</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;            <span class="keywordflow">if</span> rc.name == name:</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;                <span class="keywordflow">return</span> rc</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;        <span class="keywordflow">raise</span> <a class="code" href="classcodar_1_1cheetah_1_1exc_1_1_cheetah_exception.html">CheetahException</a>(<span class="stringliteral">&quot;Did not find run component with name {0}&quot;</span></div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;                               .format(name))</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;    <span class="keyword">def </span>_set_total_nodes(self):</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;<span class="stringliteral">        Get the total number of nodes that will be required by the Run.</span></div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;<span class="stringliteral">        Group codes based upon the node layout (separate/shared nodes),</span></div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;<span class="stringliteral">        then consider the dependency between components to calculate the</span></div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;<span class="stringliteral">        total no. of nodes.</span></div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;        <span class="comment"># num_nodes_rc = {}</span></div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;        <span class="comment"># for rc in self.run_components:</span></div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;        <span class="comment">#     code_node = self.node_layout.get_node_containing_code(rc.name)</span></div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;        <span class="comment">#     code_procs_per_node = code_node[rc.name]</span></div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;        <span class="comment">#     num_nodes_rc[rc.name] = int(math.ceil(rc.nprocs /</span></div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;        <span class="comment">#                                           code_procs_per_node))</span></div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;        <span class="comment"># group codes by node</span></div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;        code_groups = self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run.html#a564be04cf0e1030d650f3ba89764e102">node_layout</a>.group_codes_by_node()</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;        <span class="comment"># now further group codes based on the dependency</span></div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;        self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run.html#a11086d88359588a30f900faa28fd0fe7">_group_codes_by_dependencies</a>(code_groups)</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;        <span class="comment"># Get the max no. of nodes required based on the node layout</span></div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;        group_max_nodes = []</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;        <span class="keywordflow">for</span> code_group <span class="keywordflow">in</span> code_groups:</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;            group_max = 0</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;            <span class="keywordflow">for</span> codename <span class="keywordflow">in</span> code_group:</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;                rc = self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run.html#a5f2faffde66c1f4823690f0e34305e36">_get_rc_by_name</a>(codename)</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;                num_nodes_code = math.ceil(rc.nprocs/code_group[codename])</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;                group_max = max(group_max, num_nodes_code)</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;            group_max_nodes.append(group_max)</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;        self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run.html#a441a213a4a37f8cde9db77ecb9a72e89">total_nodes</a> = sum(group_max_nodes)</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;    <span class="keyword">def </span>_group_codes_by_dependencies(self, code_groups):</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;Group RCs based upon the dependencies.</span></div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;<span class="stringliteral">        Input is a list of dictionaries where the key is the code and value</span></div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;<span class="stringliteral">        is the no. of ranks on a node&quot;&quot;&quot;</span></div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;        <span class="comment"># ugh</span></div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;        <span class="keywordflow">for</span> d <span class="keywordflow">in</span> code_groups:</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;            <span class="keywordflow">for</span> rc_name <span class="keywordflow">in</span> list(d.keys()):</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;                rc = self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run.html#a5f2faffde66c1f4823690f0e34305e36">_get_rc_by_name</a>(rc_name)</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;                <span class="keywordflow">if</span> rc.after_rc_done:</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;                    m_rc = rc.after_rc_done</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;                    <span class="keywordflow">if</span> m_rc.name <span class="keywordflow">not</span> <span class="keywordflow">in</span> d.keys():</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;                        t_d = <span class="keywordtype">None</span></div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;                        <span class="keywordflow">for</span> d2 <span class="keywordflow">in</span> code_groups:</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;                            <span class="keywordflow">if</span> m_rc.name <span class="keywordflow">in</span> list(d2.keys()):</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;                                t_d = d2</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;                        <span class="keyword">assert</span> t_d <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>, <span class="stringliteral">&quot;Internal error in &quot;</span> \</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;                                                <span class="stringliteral">&quot;dependency management.&quot;</span></div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;                        t_d[rc_name] = d[rc_name]</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;                        del d[rc_name]</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;    <span class="keyword">def </span>_get_total_sosflow_component_nodes(self):</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;Get the total number of nodes that will be required by the components</span></div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;<span class="stringliteral">        that will use sosflow.</span></div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;<span class="stringliteral">        This will be less than or equal to the total number of nodes in the Run.</span></div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;<span class="stringliteral">        Node-sharing not supported yet.</span></div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;<span class="stringliteral">        This should not include the nodes required by sosflow.&quot;&quot;&quot;</span></div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;        num_nodes = 0</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;        <span class="keywordflow">for</span> rc <span class="keywordflow">in</span> self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run.html#a88ee35c04cfd039b398f131a50949305">run_components</a>:</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;            <span class="keywordflow">if</span> rc.linked_with_sosflow:</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;                code_node = self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run.html#a564be04cf0e1030d650f3ba89764e102">node_layout</a>.get_node_containing_code(rc.name)</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;                code_procs_per_node = code_node[rc.name]</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;                num_nodes += int(math.ceil(rc.nprocs / code_procs_per_node))</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;        <span class="keywordflow">return</span> num_nodes</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;</div><div class="line"><a name="l00625"></a><span class="lineno"><a class="line" href="classcodar_1_1cheetah_1_1model_1_1_run.html#a30df1617b81f2cfcde9f57d443ca25cb">  625</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run.html#a30df1617b81f2cfcde9f57d443ca25cb">get_app_param_dict</a>(self):</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;Return dictionary containing only the app parameters</span></div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;<span class="stringliteral">        (does not include nprocs or exe paths).&quot;&quot;&quot;</span></div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;        <span class="keywordflow">return</span> self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run.html#af2c8be223aa9290089e020cffec6f531">instance</a>.as_dict()</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;</div><div class="line"><a name="l00630"></a><span class="lineno"><a class="line" href="classcodar_1_1cheetah_1_1model_1_1_run.html#a5fc7b380524cfda5c77104b61e4441fd">  630</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run.html#a5fc7b380524cfda5c77104b61e4441fd">add_dataspaces_support</a>(self, machine):</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;<span class="stringliteral">        Add support for dataspaces.</span></div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;<span class="stringliteral">        Check RC Adios xml files to see if any transport methods are marked</span></div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;<span class="stringliteral">        for coupling with DATASPACES/DIMES.</span></div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;<span class="stringliteral">        For stage_write, check command line args to see if DATASPACES/DIMES</span></div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;<span class="stringliteral">        is specified.</span></div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;<span class="stringliteral">        :param machine: The current machine. I dont like this here.</span></div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;<span class="stringliteral">        :return:</span></div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;        rcs_for_coupling = {<span class="stringliteral">&#39;dimes&#39;</span>: set(), <span class="stringliteral">&#39;dataspaces&#39;</span>: set()}</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;        <span class="comment"># Search in all RC&#39;s adios xml file if any transport is set for</span></div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;        <span class="comment"># coupling with DATASPACES/DIMES</span></div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;        <span class="comment"># This is case sensitive</span></div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;        <span class="keywordflow">for</span> rc <span class="keywordflow">in</span> self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run.html#a88ee35c04cfd039b398f131a50949305">run_components</a>:</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;            <span class="keywordflow">if</span> rc.adios_xml_file:</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;                f_xml = os.path.join(rc.working_dir, os.path.basename(</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;                    rc.adios_xml_file))</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;                <span class="comment"># The xml file may have both dataspaces and dimes in</span></div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;                <span class="comment"># different groups. If any group has dataspaces</span></div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;                <span class="comment"># enabled, this rc should be marked as a dataspaces client</span></div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;                <span class="comment"># Order is important here. First search for dataspaces.</span></div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;                <span class="keywordflow">if</span> <a class="code" href="namespacecodar_1_1cheetah_1_1adios__params.html#a9dff010d44b62d23336c76d11ed2c7e3">xml_has_transport</a>(f_xml, <span class="stringliteral">&quot;DATASPACES&quot;</span>):</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;                    rcs_for_coupling[<span class="stringliteral">&#39;dataspaces&#39;</span>].add(rc)</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;                <span class="keywordflow">if</span> <a class="code" href="namespacecodar_1_1cheetah_1_1adios__params.html#a9dff010d44b62d23336c76d11ed2c7e3">xml_has_transport</a>(f_xml, <span class="stringliteral">&quot;DIMES&quot;</span>):</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;                    rcs_for_coupling[<span class="stringliteral">&#39;dimes&#39;</span>].add(rc)</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;        <span class="comment"># Special handling for stage_write</span></div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;        <span class="comment"># Check command line args for string to be one of DATASPACES/DIMES</span></div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;        <span class="keywordflow">for</span> rc <span class="keywordflow">in</span> self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run.html#a88ee35c04cfd039b398f131a50949305">run_components</a>:</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;            <span class="keywordflow">if</span> <span class="stringliteral">&quot;stage_write&quot;</span> <span class="keywordflow">in</span> rc.exe:</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;                param_values = self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run.html#af2c8be223aa9290089e020cffec6f531">instance</a>.parameter_values[rc.name]</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;                cmdlineargs = [val.value <span class="keywordflow">for</span> val <span class="keywordflow">in</span> param_values.values() <span class="keywordflow">if</span></div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;                               (val.is_type(ParamCmdLineArg) <span class="keywordflow">and</span></div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;                               type(val.value) == str)]</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;                <span class="keywordflow">if</span> <span class="stringliteral">&#39;DATASPACES&#39;</span> <span class="keywordflow">in</span> cmdlineargs:</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;                    rcs_for_coupling[<span class="stringliteral">&#39;dataspaces&#39;</span>].add(rc)</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;                <span class="keywordflow">elif</span><span class="stringliteral">&#39;DIMES&#39;</span> <span class="keywordflow">in</span> cmdlineargs:</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;                    rcs_for_coupling[<span class="stringliteral">&#39;dimes&#39;</span>].add(rc)</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;        <span class="keywordflow">if</span> rcs_for_coupling[<span class="stringliteral">&#39;dimes&#39;</span>] <span class="keywordflow">or</span> rcs_for_coupling[<span class="stringliteral">&#39;dataspaces&#39;</span>]:</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;            self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run.html#a14b4fe17aa41cb132a99ea31173b3084">_insert_dataspaces_rc</a>(rcs_for_coupling, machine)</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;        <span class="comment"># Create symlink in rc working_dir to dataspaces output conf file</span></div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;        rc_list = list(rcs_for_coupling[<span class="stringliteral">&#39;dimes&#39;</span>]) + list(rcs_for_coupling[</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;                                                           <span class="stringliteral">&#39;dataspaces&#39;</span>])</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;        src = os.path.join(self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run.html#a33e213b156b3b22e68738ce5c0942044">run_path</a>, <span class="stringliteral">&quot;conf&quot;</span>)</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;        <span class="keywordflow">for</span> rc <span class="keywordflow">in</span> rc_list:</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;            dst = os.path.join(rc.working_dir, <span class="stringliteral">&quot;conf&quot;</span>)</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;            <span class="keywordflow">if</span> src != dst:</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;                os.symlink(src, dst)</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;    <span class="keyword">def </span>_insert_dataspaces_rc(self, client_rcs, machine):</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;<span class="stringliteral">        Add dataspaces support for this run.</span></div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;<span class="stringliteral">        Creates a new RC with dataspaces server as the exe.</span></div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;<span class="stringliteral">        :param client_rcs: Dist of sets for clients coupling using</span></div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;<span class="stringliteral">        dataspaces or dimes</span></div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;<span class="stringliteral">        :param machine_name: Current machine</span></div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;<span class="stringliteral">        :return:</span></div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;        <span class="comment"># Sanity check. rc list for coupling must have &gt;1 RCs</span></div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;        <span class="keywordflow">for</span> transport_type <span class="keywordflow">in</span> client_rcs:</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;            <span class="keywordflow">if</span> len(client_rcs[transport_type]) == 1:</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;                <span class="keywordflow">raise</span> <a class="code" href="classcodar_1_1cheetah_1_1exc_1_1_cheetah_exception.html">exc.CheetahException</a>(<span class="stringliteral">&quot;Atleast 2 codes needed for &quot;</span></div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;                                           <span class="stringliteral">&quot;coupling with DATASPACES/DIMES. &quot;</span></div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;                                           <span class="stringliteral">&quot;Found 1.&quot;</span>)</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;        <span class="comment"># Check that codes has dataspaces_server exe</span></div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;        ds_server = <span class="keywordtype">None</span></div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;        sleep_after = 0</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;        <span class="keywordflow">for</span> code <span class="keywordflow">in</span> self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run.html#a3d4ea1b22ffc7b7cecd6b7ee0e48301e">codes</a>:</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;            exe = self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run.html#a3d4ea1b22ffc7b7cecd6b7ee0e48301e">codes</a>[code][<span class="stringliteral">&#39;exe&#39;</span>]</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;            <span class="keywordflow">if</span> <span class="stringliteral">&#39;dataspaces_server&#39;</span> <span class="keywordflow">in</span> exe:</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;                ds_server = exe</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;                ds_rc_name = code</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;                sleep_after = self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run.html#a3d4ea1b22ffc7b7cecd6b7ee0e48301e">codes</a>[code].get(<span class="stringliteral">&#39;sleep_after&#39;</span>, 0)</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;        <span class="keywordflow">if</span> <span class="keywordflow">not</span> ds_server:</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;            <span class="keywordflow">raise</span> <a class="code" href="classcodar_1_1cheetah_1_1exc_1_1_cheetah_exception.html">exc.CheetahException</a>(<span class="stringliteral">&quot;Dataspaces server needs to be &quot;</span></div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;                                       <span class="stringliteral">&quot;specified in codes&quot;</span>)</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;        <span class="comment"># Copy the configuration file dataspaces.conf</span></div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;        ds_conf = os.path.join(self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run.html#ad61ae023de5960c8bdbfd8437daafda2">codes_path</a>, <span class="stringliteral">&quot;dataspaces.conf&quot;</span>)</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;        <span class="keywordflow">if</span> <span class="keywordflow">not</span> os.path.isfile(ds_conf):</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;            <span class="keywordflow">raise</span> <a class="code" href="classcodar_1_1cheetah_1_1exc_1_1_cheetah_exception.html">exc.CheetahException</a>(<span class="stringliteral">&quot;Could not find dataspaces.conf in &quot;</span></div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;                                       + self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run.html#ad61ae023de5960c8bdbfd8437daafda2">codes_path</a>)</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;        dst = os.path.join(self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run.html#a33e213b156b3b22e68738ce5c0942044">run_path</a>, <span class="stringliteral">&quot;dataspaces.conf&quot;</span>)</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;        <a class="code" href="namespacecodar_1_1cheetah_1_1helpers.html#a0d950b9349d81a66ee6ceb2f6d527f27">copy_to_path</a>(ds_conf, dst)</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;        <span class="comment"># Get the no. of dataspaces and dimes clients.</span></div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;        <span class="comment"># RCs that have both must be counted as dataspaces clients</span></div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;        num_ds_clients = sum(rc.nprocs <span class="keywordflow">for</span> rc <span class="keywordflow">in</span> client_rcs[<span class="stringliteral">&#39;dataspaces&#39;</span>])</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;        unique_dimes_rcs = client_rcs[<span class="stringliteral">&#39;dimes&#39;</span>] - client_rcs[<span class="stringliteral">&#39;dataspaces&#39;</span>]</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;        num_dimes_clients = sum(rc.nprocs <span class="keywordflow">for</span> rc <span class="keywordflow">in</span> unique_dimes_rcs)</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;        num_servers = config.get_dataspaces_num_servers(num_dimes_clients,</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;                                                        num_ds_clients)</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;        <span class="keyword">assert</span> num_servers &gt; 0</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;        rc_name = <span class="stringliteral">&quot;dataspaces_server&quot;</span></div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;        args = [<span class="stringliteral">&#39;-s&#39;</span>, str(num_servers), <span class="stringliteral">&#39;-c&#39;</span>, str(num_ds_clients +</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;                                                  num_dimes_clients)]</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;        <span class="comment"># Get the node layout</span></div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;        node_layout = <span class="keywordtype">None</span></div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;        <span class="keywordflow">for</span> d <span class="keywordflow">in</span> self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run.html#a564be04cf0e1030d650f3ba89764e102">node_layout</a>.layout_list:</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;            <span class="keywordflow">if</span> ds_rc_name == list(d.keys())[0]:</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;                node_layout = d[ds_rc_name]</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;        <span class="keywordflow">if</span> node_layout <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;            node_layout = machine.dataspaces_servers_per_node</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;        rc = <a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run_component.html">RunComponent</a>(rc_name, ds_server, args,</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;                          nprocs=num_servers, sleep_after=sleep_after,</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;                          working_dir=self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run.html#a33e213b156b3b22e68738ce5c0942044">run_path</a>)</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;        self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run.html#a564be04cf0e1030d650f3ba89764e102">node_layout</a>.add_node({rc_name: node_layout})</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;        self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run.html#a88ee35c04cfd039b398f131a50949305">run_components</a>.insert(0, rc)</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;</div><div class="line"><a name="l00752"></a><span class="lineno"><a class="line" href="classcodar_1_1cheetah_1_1model_1_1_run.html#a8f4284bf79f8b909c4c2d0ef5319e3bc">  752</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run.html#a8f4284bf79f8b909c4c2d0ef5319e3bc">insert_sosflow</a>(self, sosd_path, sos_analysis_path, run_path, ppn):</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;Insert a new component at start of list to launch sosflow daemon.</span></div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;<span class="stringliteral">        Should be called only once.&quot;&quot;&quot;</span></div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;        <span class="keyword">assert</span> self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run.html#a88ee35c04cfd039b398f131a50949305">run_components</a>[0].name != <span class="stringliteral">&#39;sosflow&#39;</span></div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;        <span class="comment"># sos_args must be calculated before adding sosflow as a RunComponent,</span></div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;        <span class="comment"># as get_total_nodes() needs to return only application nodes and not</span></div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;        <span class="comment"># any nodes required by sosflow.</span></div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;        num_listeners = self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run.html#a7f82743b7b2d1efc4aeea3de17f5b183">_get_total_sosflow_component_nodes</a>()</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;        <span class="comment"># return if no components are setup to use sosflow. That is,</span></div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;        <span class="comment"># sosflow=False in `codes` for all components</span></div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;        <span class="keywordflow">if</span> num_listeners == 0:</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;            <span class="keywordflow">return</span></div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;        <span class="comment"># From Kevin Huck, U of Oregon</span></div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;        max_listeners_per_aggregator = 64</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;        num_aggregators = math.ceil(num_listeners/max_listeners_per_aggregator)</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;        <span class="comment"># Add sos aggregators to be run</span></div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;        <span class="comment">#   common aggregator parameters</span></div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;        sos_args = [</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;            <span class="stringliteral">&#39;-l&#39;</span>, str(num_listeners),</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;            <span class="stringliteral">&#39;-a&#39;</span>, str(num_aggregators),</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;            <span class="stringliteral">&#39;-w&#39;</span>, shlex.quote(run_path)</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;        ]</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;        sos_cmd = <span class="stringliteral">&#39; &#39;</span>.join([sosd_path] + sos_args)</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;        sos_fork_cmd = sos_cmd + <span class="stringliteral">&#39; -k @LISTENER_RANK@ -r listener&#39;</span></div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;        <span class="comment">#   now add each aggregator, starting with the analysis aggregator</span></div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;        listener_node_offset = 0</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;        <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(num_aggregators):</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;            sosd_args = sos_args + [</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;                <span class="stringliteral">&#39;-k&#39;</span>, str(i),</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;                <span class="stringliteral">&#39;-r&#39;</span>, <span class="stringliteral">&#39;aggregator&#39;</span>,</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;            ]</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;            rc_name = <span class="stringliteral">&#39;sosflow_aggregator_&#39;</span> + str(i)</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;            rc_exe_path = sosd_path</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;            <span class="comment"># If sos analysis is enabled, the first aggregator should be</span></div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;            <span class="comment"># the sos analysis script instead of a plain sosd aggregator.</span></div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;            <span class="keywordflow">if</span> i == 0 <span class="keywordflow">and</span> self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run.html#a5713827ad4bde77d4fcf46c05f10b554">sosflow_analysis</a>:</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;                rc_name = <span class="stringliteral">&quot;sosflow_analysis&quot;</span></div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;                rc_exe_path = sos_analysis_path</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;                sosd_args = [sosd_path] + sosd_args</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;            self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run.html#a564be04cf0e1030d650f3ba89764e102">node_layout</a>.add_node({rc_name: 1})</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;            rc = <a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run_component.html">RunComponent</a>(rc_name,</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;                              rc_exe_path, sosd_args,</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;                              nprocs=1, sleep_after=5,</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;                              working_dir=self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run.html#a33e213b156b3b22e68738ce5c0942044">run_path</a>)</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;            rc.env[<span class="stringliteral">&#39;sos_cmd&#39;</span>] = sos_cmd</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;            rc.env[<span class="stringliteral">&#39;SOS_FORK_COMMAND&#39;</span>] = sos_fork_cmd</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;            rc.env[<span class="stringliteral">&#39;SOS_CMD_PORT&#39;</span>] = <span class="stringliteral">&#39;22500&#39;</span></div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;            rc.env[<span class="stringliteral">&#39;SOS_EVPATH_MEETUP&#39;</span>] = run_path</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;            rc.env[<span class="stringliteral">&#39;TAU_SOS&#39;</span>] = <span class="stringliteral">&#39;1&#39;</span></div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;            self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run.html#a88ee35c04cfd039b398f131a50949305">run_components</a>.insert(i, rc)</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;            listener_node_offset += 1</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;        <span class="comment"># add env vars to each run, including sosflow daemon</span></div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;        <span class="comment"># NOTE: not sure how many if any are required for sosd, but</span></div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;        <span class="comment"># should not hurt to have them, and simplifies the offset</span></div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;        <span class="comment"># calculation</span></div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;        <span class="keywordflow">for</span> rc <span class="keywordflow">in</span> self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run.html#a88ee35c04cfd039b398f131a50949305">run_components</a>:</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;            <span class="comment"># ignore component if not setup to use sosflow</span></div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;            <span class="keywordflow">if</span> <span class="keywordflow">not</span> rc.linked_with_sosflow:</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;                <span class="keywordflow">continue</span></div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;            <span class="comment"># TODO: is this actually used directly?</span></div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;            rc.env[<span class="stringliteral">&#39;sos_cmd&#39;</span>] = sos_cmd</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;            rc.env[<span class="stringliteral">&#39;SOS_FORK_COMMAND&#39;</span>] = sos_fork_cmd</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;            code_node = self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run.html#a564be04cf0e1030d650f3ba89764e102">node_layout</a>.get_node_containing_code(rc.name)</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;            <span class="comment"># TODO: we don&#39;t yet know how SOSFLOW will support apps that</span></div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;            <span class="comment"># do node shairng, so for now require that there is no</span></div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;            <span class="comment"># sharing.</span></div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;            <span class="keyword">assert</span> len(code_node) == 1</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;            code_procs_per_node = code_node[rc.name]</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;            code_nodes = int(math.ceil(rc.nprocs / code_procs_per_node))</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;            <span class="comment"># Set the TCP port that the listener will listen to,</span></div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;            <span class="comment"># and the port that clients will attempt to connect to.</span></div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;            rc.env[<span class="stringliteral">&#39;SOS_CMD_PORT&#39;</span>] = <span class="stringliteral">&#39;22500&#39;</span></div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;            <span class="comment"># Set the directory where the SOS listeners and aggregators</span></div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;            <span class="comment"># will use to establish EVPath links to each other</span></div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;            rc.env[<span class="stringliteral">&#39;SOS_EVPATH_MEETUP&#39;</span>] = run_path</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;            <span class="comment"># Tell TAU that it should connect to SOS</span></div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;            <span class="comment"># and send TAU data to SOS when adios_close(),</span></div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;            <span class="comment"># adios_advance_step() calls are made,</span></div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;            <span class="comment"># and when the application terminates.</span></div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;            rc.env[<span class="stringliteral">&#39;TAU_SOS&#39;</span>] = <span class="stringliteral">&#39;1&#39;</span></div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;            <span class="comment"># Tell SOS how many application ranks per node there are</span></div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;            <span class="comment"># How do you get this information?</span></div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;            <span class="comment"># TODO: This will change when we have the ability to set a</span></div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;            <span class="comment"># different number of procs per node</span></div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;            rc.env[<span class="stringliteral">&#39;SOS_APP_RANKS_PER_NODE&#39;</span>] = str(code_procs_per_node)</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;            <span class="comment"># Tell SOS what &#39;rank&#39; it&#39;s listeners should start with</span></div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;            <span class="comment"># the aggregator was &#39;rank&#39; 0, so this node&#39;s listener will be 1</span></div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;            <span class="comment"># This offset is the node count where this fob component starts</span></div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;            rc.env[<span class="stringliteral">&#39;SOS_LISTENER_RANK_OFFSET&#39;</span>] = str(listener_node_offset)</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;            <span class="comment"># TODO: this assumes node exclusive. To support node sharing</span></div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;            <span class="comment"># with custom layouts, will need to know layout here and</span></div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;            <span class="comment"># calculate actual node usage. This potentially duplicates</span></div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;            <span class="comment"># functionality needed in workflow, should eventual converge</span></div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;            <span class="comment"># so they are using the same model.</span></div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;            listener_node_offset += code_nodes</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;</div><div class="line"><a name="l00870"></a><span class="lineno"><a class="line" href="classcodar_1_1cheetah_1_1model_1_1_run_component.html">  870</a></span>&#160;<span class="keyword">class </span><a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run_component.html">RunComponent</a>(object):</div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;    <span class="keyword">def </span><a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run_component.html#a3fefe66c8e1f1f912a617e900ba6c75b">__init__</a>(self, name, exe, args, sched_args, nprocs, working_dir,</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;                 component_inputs=None, sleep_after=None,</div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;                 linked_with_sosflow=False, adios_xml_file=None,</div><div class="line"><a name="l00874"></a><span class="lineno"><a class="line" href="classcodar_1_1cheetah_1_1model_1_1_run_component.html#a3fefe66c8e1f1f912a617e900ba6c75b">  874</a></span>&#160;                 env=None, timeout=None, hostfile=None, runner_override=False):</div><div class="line"><a name="l00875"></a><span class="lineno"><a class="line" href="classcodar_1_1cheetah_1_1model_1_1_run_component.html#a743773d825aa10e6ef12ae695277c039">  875</a></span>&#160;        self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run_component.html#a743773d825aa10e6ef12ae695277c039">name</a> = name</div><div class="line"><a name="l00876"></a><span class="lineno"><a class="line" href="classcodar_1_1cheetah_1_1model_1_1_run_component.html#ad2e4c00739c82e7a9e777056f6735a72">  876</a></span>&#160;        self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run_component.html#ad2e4c00739c82e7a9e777056f6735a72">exe</a> = exe</div><div class="line"><a name="l00877"></a><span class="lineno"><a class="line" href="classcodar_1_1cheetah_1_1model_1_1_run_component.html#a61b71b40331e4375a82cf0be848acff5">  877</a></span>&#160;        self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run_component.html#a61b71b40331e4375a82cf0be848acff5">args</a> = args</div><div class="line"><a name="l00878"></a><span class="lineno"><a class="line" href="classcodar_1_1cheetah_1_1model_1_1_run_component.html#a4894bb7231945d68c104e3f9d647066b">  878</a></span>&#160;        self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run_component.html#a4894bb7231945d68c104e3f9d647066b">sched_args</a> = sched_args</div><div class="line"><a name="l00879"></a><span class="lineno"><a class="line" href="classcodar_1_1cheetah_1_1model_1_1_run_component.html#af9dfa80f9ec439a94ca09d7db279c63c">  879</a></span>&#160;        self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run_component.html#af9dfa80f9ec439a94ca09d7db279c63c">nprocs</a> = nprocs</div><div class="line"><a name="l00880"></a><span class="lineno"><a class="line" href="classcodar_1_1cheetah_1_1model_1_1_run_component.html#acb1eadc1f5def0e5b74cef8042ee3baa">  880</a></span>&#160;        self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run_component.html#acb1eadc1f5def0e5b74cef8042ee3baa">sleep_after</a> = sleep_after</div><div class="line"><a name="l00881"></a><span class="lineno"><a class="line" href="classcodar_1_1cheetah_1_1model_1_1_run_component.html#ab041ae0903ff2773788ef1759b5aeca0">  881</a></span>&#160;        self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run_component.html#ab041ae0903ff2773788ef1759b5aeca0">env</a> = env <span class="keywordflow">or</span> {}</div><div class="line"><a name="l00882"></a><span class="lineno"><a class="line" href="classcodar_1_1cheetah_1_1model_1_1_run_component.html#aab7eb17918554027035c553b8580c140">  882</a></span>&#160;        self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run_component.html#aab7eb17918554027035c553b8580c140">timeout</a> = timeout</div><div class="line"><a name="l00883"></a><span class="lineno"><a class="line" href="classcodar_1_1cheetah_1_1model_1_1_run_component.html#a63435d4ed53fefe7a99230d88cae4e32">  883</a></span>&#160;        self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run_component.html#a63435d4ed53fefe7a99230d88cae4e32">working_dir</a> = working_dir</div><div class="line"><a name="l00884"></a><span class="lineno"><a class="line" href="classcodar_1_1cheetah_1_1model_1_1_run_component.html#a1d8cb3d579339ac5eba3c0311640b382">  884</a></span>&#160;        self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run_component.html#a1d8cb3d579339ac5eba3c0311640b382">component_inputs</a> = component_inputs</div><div class="line"><a name="l00885"></a><span class="lineno"><a class="line" href="classcodar_1_1cheetah_1_1model_1_1_run_component.html#a70c8417b14f64e93c812d52d63180e1f">  885</a></span>&#160;        self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run_component.html#a70c8417b14f64e93c812d52d63180e1f">linked_with_sosflow</a> = linked_with_sosflow</div><div class="line"><a name="l00886"></a><span class="lineno"><a class="line" href="classcodar_1_1cheetah_1_1model_1_1_run_component.html#a2a855ca947ebabda952f8dab7c1fe4a6">  886</a></span>&#160;        self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run_component.html#a2a855ca947ebabda952f8dab7c1fe4a6">adios_xml_file</a> = adios_xml_file</div><div class="line"><a name="l00887"></a><span class="lineno"><a class="line" href="classcodar_1_1cheetah_1_1model_1_1_run_component.html#abcc514032d8dc3c203db3fea1e0cd94b">  887</a></span>&#160;        self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run_component.html#abcc514032d8dc3c203db3fea1e0cd94b">hostfile</a> = hostfile</div><div class="line"><a name="l00888"></a><span class="lineno"><a class="line" href="classcodar_1_1cheetah_1_1model_1_1_run_component.html#a0ea6b3921652cd3852a5e2425d9a80ca">  888</a></span>&#160;        self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run_component.html#a0ea6b3921652cd3852a5e2425d9a80ca">after_rc_done</a> = <span class="keywordtype">None</span></div><div class="line"><a name="l00889"></a><span class="lineno"><a class="line" href="classcodar_1_1cheetah_1_1model_1_1_run_component.html#ac5ca127f98817a9a14ef6d63d9b53d4f">  889</a></span>&#160;        self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run_component.html#ac5ca127f98817a9a14ef6d63d9b53d4f">runner_override</a> = runner_override</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;</div><div class="line"><a name="l00891"></a><span class="lineno"><a class="line" href="classcodar_1_1cheetah_1_1model_1_1_run_component.html#a9400f073612f8afefa3568e0205b3770">  891</a></span>&#160;    <span class="keyword">def </span><a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run_component.html#a9400f073612f8afefa3568e0205b3770">as_fob_data</a>(self):</div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;        data = dict(name=self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run_component.html#a743773d825aa10e6ef12ae695277c039">name</a>,</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;                    exe=self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run_component.html#ad2e4c00739c82e7a9e777056f6735a72">exe</a>,</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;                    args=self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run_component.html#a61b71b40331e4375a82cf0be848acff5">args</a>,</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;                    sched_args=self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run_component.html#a4894bb7231945d68c104e3f9d647066b">sched_args</a>,</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;                    nprocs=self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run_component.html#af9dfa80f9ec439a94ca09d7db279c63c">nprocs</a>,</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;                    working_dir=self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run_component.html#a63435d4ed53fefe7a99230d88cae4e32">working_dir</a>,</div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;                    sleep_after=self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run_component.html#acb1eadc1f5def0e5b74cef8042ee3baa">sleep_after</a>,</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;                    linked_with_sosflow=self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run_component.html#a70c8417b14f64e93c812d52d63180e1f">linked_with_sosflow</a>,</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;                    adios_xml_file=self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run_component.html#a2a855ca947ebabda952f8dab7c1fe4a6">adios_xml_file</a>,</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;                    hostfile=self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run_component.html#abcc514032d8dc3c203db3fea1e0cd94b">hostfile</a>,</div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;                    after_rc_done=<span class="keywordtype">None</span>,</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;                    runner_override=self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run_component.html#ac5ca127f98817a9a14ef6d63d9b53d4f">runner_override</a>)</div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;        <span class="keywordflow">if</span> self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run_component.html#ab041ae0903ff2773788ef1759b5aeca0">env</a>:</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;            data[<span class="stringliteral">&#39;env&#39;</span>] = self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run_component.html#ab041ae0903ff2773788ef1759b5aeca0">env</a></div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;        <span class="keywordflow">if</span> self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run_component.html#aab7eb17918554027035c553b8580c140">timeout</a>:</div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;            data[<span class="stringliteral">&#39;timeout&#39;</span>] = self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run_component.html#aab7eb17918554027035c553b8580c140">timeout</a></div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;        <span class="keywordflow">if</span> self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run_component.html#abcc514032d8dc3c203db3fea1e0cd94b">hostfile</a>:</div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;            data[<span class="stringliteral">&#39;hostfile&#39;</span>] = self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run_component.html#a63435d4ed53fefe7a99230d88cae4e32">working_dir</a> + <span class="stringliteral">&quot;/&quot;</span> + self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run_component.html#abcc514032d8dc3c203db3fea1e0cd94b">hostfile</a></div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;        <span class="keywordflow">if</span> self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run_component.html#a0ea6b3921652cd3852a5e2425d9a80ca">after_rc_done</a>:</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;            data[<span class="stringliteral">&#39;after_rc_done&#39;</span>] = self.<a class="code" href="classcodar_1_1cheetah_1_1model_1_1_run_component.html#a0ea6b3921652cd3852a5e2425d9a80ca">after_rc_done</a>.name</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;        <span class="keywordflow">return</span> data</div><div class="ttc" id="namespacecodar_1_1savanna_1_1node__layout_html"><div class="ttname"><a href="namespacecodar_1_1savanna_1_1node__layout.html">codar.savanna.node_layout</a></div><div class="ttdef"><b>Definition:</b> <a href="node__layout_8py_source.html#l00001">node_layout.py:1</a></div></div>
<div class="ttc" id="classcodar_1_1cheetah_1_1model_1_1_run_component_html_a2a855ca947ebabda952f8dab7c1fe4a6"><div class="ttname"><a href="classcodar_1_1cheetah_1_1model_1_1_run_component.html#a2a855ca947ebabda952f8dab7c1fe4a6">codar.cheetah.model.RunComponent.adios_xml_file</a></div><div class="ttdeci">adios_xml_file</div><div class="ttdef"><b>Definition:</b> <a href="cheetah_2model_8py_source.html#l00886">model.py:886</a></div></div>
<div class="ttc" id="classcodar_1_1cheetah_1_1model_1_1_run_html_a9984eba5c5e066d44c2e1b825f800d63"><div class="ttname"><a href="classcodar_1_1cheetah_1_1model_1_1_run.html#a9984eba5c5e066d44c2e1b825f800d63">codar.cheetah.model.Run._get_codes_argv_ordered</a></div><div class="ttdeci">def _get_codes_argv_ordered(self)</div><div class="ttdef"><b>Definition:</b> <a href="cheetah_2model_8py_source.html#l00531">model.py:531</a></div></div>
<div class="ttc" id="classcodar_1_1cheetah_1_1model_1_1_run_html_a8d10cb20808cc4c66a59f949ec40aeb8"><div class="ttname"><a href="classcodar_1_1cheetah_1_1model_1_1_run.html#a8d10cb20808cc4c66a59f949ec40aeb8">codar.cheetah.model.Run.get_fob_data_list</a></div><div class="ttdeci">def get_fob_data_list(self)</div><div class="ttdef"><b>Definition:</b> <a href="cheetah_2model_8py_source.html#l00528">model.py:528</a></div></div>
<div class="ttc" id="classcodar_1_1cheetah_1_1model_1_1_run_component_html_a9400f073612f8afefa3568e0205b3770"><div class="ttname"><a href="classcodar_1_1cheetah_1_1model_1_1_run_component.html#a9400f073612f8afefa3568e0205b3770">codar.cheetah.model.RunComponent.as_fob_data</a></div><div class="ttdeci">def as_fob_data(self)</div><div class="ttdef"><b>Definition:</b> <a href="cheetah_2model_8py_source.html#l00891">model.py:891</a></div></div>
<div class="ttc" id="classcodar_1_1cheetah_1_1model_1_1_run_component_html"><div class="ttname"><a href="classcodar_1_1cheetah_1_1model_1_1_run_component.html">codar.cheetah.model.RunComponent</a></div><div class="ttdef"><b>Definition:</b> <a href="cheetah_2model_8py_source.html#l00870">model.py:870</a></div></div>
<div class="ttc" id="classcodar_1_1cheetah_1_1model_1_1_run_component_html_a3fefe66c8e1f1f912a617e900ba6c75b"><div class="ttname"><a href="classcodar_1_1cheetah_1_1model_1_1_run_component.html#a3fefe66c8e1f1f912a617e900ba6c75b">codar.cheetah.model.RunComponent.__init__</a></div><div class="ttdeci">def __init__(self, name, exe, args, sched_args, nprocs, working_dir, component_inputs=None, sleep_after=None, linked_with_sosflow=False, adios_xml_file=None, env=None, timeout=None, hostfile=None, runner_override=False)</div><div class="ttdef"><b>Definition:</b> <a href="cheetah_2model_8py_source.html#l00874">model.py:874</a></div></div>
<div class="ttc" id="namespacecodar_1_1cheetah_html"><div class="ttname"><a href="namespacecodar_1_1cheetah.html">codar.cheetah</a></div><div class="ttdef"><b>Definition:</b> <a href="cheetah_2____init_____8py_source.html#l00001">__init__.py:1</a></div></div>
<div class="ttc" id="classcodar_1_1cheetah_1_1model_1_1_run_html_a441a213a4a37f8cde9db77ecb9a72e89"><div class="ttname"><a href="classcodar_1_1cheetah_1_1model_1_1_run.html#a441a213a4a37f8cde9db77ecb9a72e89">codar.cheetah.model.Run.total_nodes</a></div><div class="ttdeci">total_nodes</div><div class="ttdef"><b>Definition:</b> <a href="cheetah_2model_8py_source.html#l00426">model.py:426</a></div></div>
<div class="ttc" id="classcodar_1_1cheetah_1_1model_1_1_run_html_a5f2faffde66c1f4823690f0e34305e36"><div class="ttname"><a href="classcodar_1_1cheetah_1_1model_1_1_run.html#a5f2faffde66c1f4823690f0e34305e36">codar.cheetah.model.Run._get_rc_by_name</a></div><div class="ttdeci">def _get_rc_by_name(self, name)</div><div class="ttdef"><b>Definition:</b> <a href="cheetah_2model_8py_source.html#l00548">model.py:548</a></div></div>
<div class="ttc" id="classcodar_1_1cheetah_1_1model_1_1_run_html_a1be34ccf48758dc37ffde2d5d2680bfa"><div class="ttname"><a href="classcodar_1_1cheetah_1_1model_1_1_run.html#a1be34ccf48758dc37ffde2d5d2680bfa">codar.cheetah.model.Run.machine</a></div><div class="ttdeci">machine</div><div class="ttdef"><b>Definition:</b> <a href="cheetah_2model_8py_source.html#l00418">model.py:418</a></div></div>
<div class="ttc" id="namespacecodar_1_1cheetah_1_1helpers_html_a23099409c04805468db73bd84ee21cb3"><div class="ttname"><a href="namespacecodar_1_1cheetah_1_1helpers.html#a23099409c04805468db73bd84ee21cb3">codar.cheetah.helpers.relative_or_absolute_path</a></div><div class="ttdeci">def relative_or_absolute_path(prefix, path)</div><div class="ttdef"><b>Definition:</b> <a href="helpers_8py_source.html#l00130">helpers.py:130</a></div></div>
<div class="ttc" id="classcodar_1_1cheetah_1_1model_1_1_campaign_html_a67ffe04ef4a24659ef9199dd4e4b0491"><div class="ttname"><a href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a67ffe04ef4a24659ef9199dd4e4b0491">codar.cheetah.model.Campaign._experiment_relative_path</a></div><div class="ttdeci">def _experiment_relative_path(self, p)</div><div class="ttdef"><b>Definition:</b> <a href="cheetah_2model_8py_source.html#l00393">model.py:393</a></div></div>
<div class="ttc" id="classcodar_1_1cheetah_1_1model_1_1_campaign_html_a063e53373a2750fcdbf7eec7ebaa101b"><div class="ttname"><a href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a063e53373a2750fcdbf7eec7ebaa101b">codar.cheetah.model.Campaign.run_post_process_stop_group_on_failure</a></div><div class="ttdeci">bool run_post_process_stop_group_on_failure</div><div class="ttdef"><b>Definition:</b> <a href="cheetah_2model_8py_source.html#l00065">model.py:65</a></div></div>
<div class="ttc" id="classcodar_1_1cheetah_1_1model_1_1_run_html_a8f4284bf79f8b909c4c2d0ef5319e3bc"><div class="ttname"><a href="classcodar_1_1cheetah_1_1model_1_1_run.html#a8f4284bf79f8b909c4c2d0ef5319e3bc">codar.cheetah.model.Run.insert_sosflow</a></div><div class="ttdeci">def insert_sosflow(self, sosd_path, sos_analysis_path, run_path, ppn)</div><div class="ttdef"><b>Definition:</b> <a href="cheetah_2model_8py_source.html#l00752">model.py:752</a></div></div>
<div class="ttc" id="classcodar_1_1cheetah_1_1model_1_1_run_component_html_ad2e4c00739c82e7a9e777056f6735a72"><div class="ttname"><a href="classcodar_1_1cheetah_1_1model_1_1_run_component.html#ad2e4c00739c82e7a9e777056f6735a72">codar.cheetah.model.RunComponent.exe</a></div><div class="ttdeci">exe</div><div class="ttdef"><b>Definition:</b> <a href="cheetah_2model_8py_source.html#l00876">model.py:876</a></div></div>
<div class="ttc" id="classcodar_1_1cheetah_1_1model_1_1_campaign_html_a09266b3421f37a82d8e12c1272e3f54b"><div class="ttname"><a href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a09266b3421f37a82d8e12c1272e3f54b">codar.cheetah.model.Campaign.make_experiment_run_dir</a></div><div class="ttdeci">def make_experiment_run_dir(self, output_dir, _check_code_paths=True)</div><div class="ttdef"><b>Definition:</b> <a href="cheetah_2model_8py_source.html#l00199">model.py:199</a></div></div>
<div class="ttc" id="classcodar_1_1cheetah_1_1model_1_1_run_component_html_a63435d4ed53fefe7a99230d88cae4e32"><div class="ttname"><a href="classcodar_1_1cheetah_1_1model_1_1_run_component.html#a63435d4ed53fefe7a99230d88cae4e32">codar.cheetah.model.RunComponent.working_dir</a></div><div class="ttdeci">working_dir</div><div class="ttdef"><b>Definition:</b> <a href="cheetah_2model_8py_source.html#l00883">model.py:883</a></div></div>
<div class="ttc" id="classcodar_1_1cheetah_1_1model_1_1_run_html_af56a27848d2d8b900435b462ac6b74d8"><div class="ttname"><a href="classcodar_1_1cheetah_1_1model_1_1_run.html#af56a27848d2d8b900435b462ac6b74d8">codar.cheetah.model.Run.get_total_nprocs</a></div><div class="ttdeci">def get_total_nprocs(self)</div><div class="ttdef"><b>Definition:</b> <a href="cheetah_2model_8py_source.html#l00545">model.py:545</a></div></div>
<div class="ttc" id="namespacecodar_1_1cheetah_1_1exc_html"><div class="ttname"><a href="namespacecodar_1_1cheetah_1_1exc.html">codar.cheetah.exc</a></div><div class="ttdef"><b>Definition:</b> <a href="cheetah_2exc_8py_source.html#l00001">exc.py:1</a></div></div>
<div class="ttc" id="classcodar_1_1cheetah_1_1model_1_1_campaign_html"><div class="ttname"><a href="classcodar_1_1cheetah_1_1model_1_1_campaign.html">codar.cheetah.model.Campaign</a></div><div class="ttdef"><b>Definition:</b> <a href="cheetah_2model_8py_source.html#l00039">model.py:39</a></div></div>
<div class="ttc" id="classcodar_1_1cheetah_1_1model_1_1_campaign_html_a06c63b2936ba8b23426ce41472dcbfd4"><div class="ttname"><a href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a06c63b2936ba8b23426ce41472dcbfd4">codar.cheetah.model.Campaign.supported_machines</a></div><div class="ttdeci">list supported_machines</div><div class="ttdef"><b>Definition:</b> <a href="cheetah_2model_8py_source.html#l00049">model.py:49</a></div></div>
<div class="ttc" id="classcodar_1_1cheetah_1_1model_1_1_run_html_a5fc7b380524cfda5c77104b61e4441fd"><div class="ttname"><a href="classcodar_1_1cheetah_1_1model_1_1_run.html#a5fc7b380524cfda5c77104b61e4441fd">codar.cheetah.model.Run.add_dataspaces_support</a></div><div class="ttdeci">def add_dataspaces_support(self, machine)</div><div class="ttdef"><b>Definition:</b> <a href="cheetah_2model_8py_source.html#l00630">model.py:630</a></div></div>
<div class="ttc" id="classcodar_1_1cheetah_1_1model_1_1_run_html_ae44eabdd8697736d7f67cbe22e47c3d8"><div class="ttname"><a href="classcodar_1_1cheetah_1_1model_1_1_run.html#ae44eabdd8697736d7f67cbe22e47c3d8">codar.cheetah.model.Run._get_run_components</a></div><div class="ttdeci">def _get_run_components(self)</div><div class="ttdef"><b>Definition:</b> <a href="cheetah_2model_8py_source.html#l00447">model.py:447</a></div></div>
<div class="ttc" id="classcodar_1_1cheetah_1_1model_1_1_campaign_html_a434f06408e6b364e0efc232fa107eb33"><div class="ttname"><a href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a434f06408e6b364e0efc232fa107eb33">codar.cheetah.model.Campaign.app_config_scripts</a></div><div class="ttdeci">app_config_scripts</div><div class="ttdef"><b>Definition:</b> <a href="cheetah_2model_8py_source.html#l00074">model.py:74</a></div></div>
<div class="ttc" id="classcodar_1_1cheetah_1_1model_1_1_run_html_a7f82743b7b2d1efc4aeea3de17f5b183"><div class="ttname"><a href="classcodar_1_1cheetah_1_1model_1_1_run.html#a7f82743b7b2d1efc4aeea3de17f5b183">codar.cheetah.model.Run._get_total_sosflow_component_nodes</a></div><div class="ttdeci">def _get_total_sosflow_component_nodes(self)</div><div class="ttdef"><b>Definition:</b> <a href="cheetah_2model_8py_source.html#l00610">model.py:610</a></div></div>
<div class="ttc" id="namespacecodar_1_1savanna_html"><div class="ttname"><a href="namespacecodar_1_1savanna.html">codar.savanna</a></div><div class="ttdef"><b>Definition:</b> <a href="savanna_2____init_____8py_source.html#l00001">__init__.py:1</a></div></div>
<div class="ttc" id="namespacecodar_1_1cheetah_1_1parameters_html"><div class="ttname"><a href="namespacecodar_1_1cheetah_1_1parameters.html">codar.cheetah.parameters</a></div><div class="ttdef"><b>Definition:</b> <a href="parameters_8py_source.html#l00001">parameters.py:1</a></div></div>
<div class="ttc" id="classcodar_1_1cheetah_1_1model_1_1_campaign_html_ad1b15b5ae37794b2568fe8460f36eab6"><div class="ttname"><a href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#ad1b15b5ae37794b2568fe8460f36eab6">codar.cheetah.model.Campaign.__init__</a></div><div class="ttdeci">def __init__(self, machine_name, app_dir)</div><div class="ttdef"><b>Definition:</b> <a href="cheetah_2model_8py_source.html#l00117">model.py:117</a></div></div>
<div class="ttc" id="classcodar_1_1cheetah_1_1model_1_1_run_html_a6b83070bbd7f8675be9f9ff7e91cadff"><div class="ttname"><a href="classcodar_1_1cheetah_1_1model_1_1_run.html#a6b83070bbd7f8675be9f9ff7e91cadff">codar.cheetah.model.Run.__init__</a></div><div class="ttdeci">def __init__(self, instance, codes, codes_path, run_path, inputs, machine, node_layout, rc_dependency, component_subdirs, sosflow_profiling, sosflow_analyis, component_inputs=None)</div><div class="ttdef"><b>Definition:</b> <a href="cheetah_2model_8py_source.html#l00411">model.py:411</a></div></div>
<div class="ttc" id="classcodar_1_1cheetah_1_1model_1_1_run_html_a30df1617b81f2cfcde9f57d443ca25cb"><div class="ttname"><a href="classcodar_1_1cheetah_1_1model_1_1_run.html#a30df1617b81f2cfcde9f57d443ca25cb">codar.cheetah.model.Run.get_app_param_dict</a></div><div class="ttdeci">def get_app_param_dict(self)</div><div class="ttdef"><b>Definition:</b> <a href="cheetah_2model_8py_source.html#l00625">model.py:625</a></div></div>
<div class="ttc" id="classcodar_1_1cheetah_1_1model_1_1_campaign_html_a7433ef9d22eaf392a8c006b5c3a0b9c2"><div class="ttname"><a href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a7433ef9d22eaf392a8c006b5c3a0b9c2">codar.cheetah.model.Campaign._id_file</a></div><div class="ttdeci">string _id_file</div><div class="ttdef"><b>Definition:</b> <a href="cheetah_2model_8py_source.html#l00115">model.py:115</a></div></div>
<div class="ttc" id="classcodar_1_1cheetah_1_1model_1_1_run_component_html_af9dfa80f9ec439a94ca09d7db279c63c"><div class="ttname"><a href="classcodar_1_1cheetah_1_1model_1_1_run_component.html#af9dfa80f9ec439a94ca09d7db279c63c">codar.cheetah.model.RunComponent.nprocs</a></div><div class="ttdeci">nprocs</div><div class="ttdef"><b>Definition:</b> <a href="cheetah_2model_8py_source.html#l00879">model.py:879</a></div></div>
<div class="ttc" id="namespacecodar_1_1cheetah_1_1adios__params_html"><div class="ttname"><a href="namespacecodar_1_1cheetah_1_1adios__params.html">codar.cheetah.adios_params</a></div><div class="ttdef"><b>Definition:</b> <a href="adios__params_8py_source.html#l00001">adios_params.py:1</a></div></div>
<div class="ttc" id="classcodar_1_1cheetah_1_1model_1_1_run_html_a5713827ad4bde77d4fcf46c05f10b554"><div class="ttname"><a href="classcodar_1_1cheetah_1_1model_1_1_run.html#a5713827ad4bde77d4fcf46c05f10b554">codar.cheetah.model.Run.sosflow_analysis</a></div><div class="ttdeci">sosflow_analysis</div><div class="ttdef"><b>Definition:</b> <a href="cheetah_2model_8py_source.html#l00424">model.py:424</a></div></div>
<div class="ttc" id="classcodar_1_1cheetah_1_1model_1_1_run_component_html_ab041ae0903ff2773788ef1759b5aeca0"><div class="ttname"><a href="classcodar_1_1cheetah_1_1model_1_1_run_component.html#ab041ae0903ff2773788ef1759b5aeca0">codar.cheetah.model.RunComponent.env</a></div><div class="ttdeci">env</div><div class="ttdef"><b>Definition:</b> <a href="cheetah_2model_8py_source.html#l00881">model.py:881</a></div></div>
<div class="ttc" id="classcodar_1_1cheetah_1_1model_1_1_run_html_a3d4ea1b22ffc7b7cecd6b7ee0e48301e"><div class="ttname"><a href="classcodar_1_1cheetah_1_1model_1_1_run.html#a3d4ea1b22ffc7b7cecd6b7ee0e48301e">codar.cheetah.model.Run.codes</a></div><div class="ttdeci">codes</div><div class="ttdef"><b>Definition:</b> <a href="cheetah_2model_8py_source.html#l00413">model.py:413</a></div></div>
<div class="ttc" id="namespacecodar_1_1cheetah_1_1helpers_html_a97a25670924e4a57d6df60a2b4293244"><div class="ttname"><a href="namespacecodar_1_1cheetah_1_1helpers.html#a97a25670924e4a57d6df60a2b4293244">codar.cheetah.helpers.relative_or_absolute_path_list</a></div><div class="ttdeci">def relative_or_absolute_path_list(prefix, path_list)</div><div class="ttdef"><b>Definition:</b> <a href="helpers_8py_source.html#l00137">helpers.py:137</a></div></div>
<div class="ttc" id="classcodar_1_1cheetah_1_1model_1_1_campaign_html_a298ec8ce182bf48901b0a40332de3c6d"><div class="ttname"><a href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a298ec8ce182bf48901b0a40332de3c6d">codar.cheetah.model.Campaign.sweeps</a></div><div class="ttdeci">list sweeps</div><div class="ttdef"><b>Definition:</b> <a href="cheetah_2model_8py_source.html#l00050">model.py:50</a></div></div>
<div class="ttc" id="namespacecodar_1_1cheetah_1_1helpers_html_a0d950b9349d81a66ee6ceb2f6d527f27"><div class="ttname"><a href="namespacecodar_1_1cheetah_1_1helpers.html#a0d950b9349d81a66ee6ceb2f6d527f27">codar.cheetah.helpers.copy_to_path</a></div><div class="ttdeci">def copy_to_path(source_file, dest_file, follow_symlinks=True)</div><div class="ttdef"><b>Definition:</b> <a href="helpers_8py_source.html#l00094">helpers.py:94</a></div></div>
<div class="ttc" id="namespacecodar_1_1cheetah_1_1helpers_html"><div class="ttname"><a href="namespacecodar_1_1cheetah_1_1helpers.html">codar.cheetah.helpers</a></div><div class="ttdef"><b>Definition:</b> <a href="helpers_8py_source.html#l00001">helpers.py:1</a></div></div>
<div class="ttc" id="classcodar_1_1cheetah_1_1model_1_1_run_component_html_a743773d825aa10e6ef12ae695277c039"><div class="ttname"><a href="classcodar_1_1cheetah_1_1model_1_1_run_component.html#a743773d825aa10e6ef12ae695277c039">codar.cheetah.model.RunComponent.name</a></div><div class="ttdeci">name</div><div class="ttdef"><b>Definition:</b> <a href="cheetah_2model_8py_source.html#l00875">model.py:875</a></div></div>
<div class="ttc" id="namespacecodar_1_1cheetah_1_1helpers_html_a229590ddcb3ea80584a1bd54503b852d"><div class="ttname"><a href="namespacecodar_1_1cheetah_1_1helpers.html#a229590ddcb3ea80584a1bd54503b852d">codar.cheetah.helpers.copy_to_dir</a></div><div class="ttdeci">def copy_to_dir(source_file, dest_dir, follow_symlinks=True)</div><div class="ttdef"><b>Definition:</b> <a href="helpers_8py_source.html#l00080">helpers.py:80</a></div></div>
<div class="ttc" id="classcodar_1_1cheetah_1_1model_1_1_campaign_html_a0d0c15af5ad8c345542eeba939f15ef6"><div class="ttname"><a href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a0d0c15af5ad8c345542eeba939f15ef6">codar.cheetah.model.Campaign.app_dir</a></div><div class="ttdeci">app_dir</div><div class="ttdef"><b>Definition:</b> <a href="cheetah_2model_8py_source.html#l00126">model.py:126</a></div></div>
<div class="ttc" id="classcodar_1_1cheetah_1_1model_1_1_run_html_abff987dfad4500fe7875c52f964c73c2"><div class="ttname"><a href="classcodar_1_1cheetah_1_1model_1_1_run.html#abff987dfad4500fe7875c52f964c73c2">codar.cheetah.model.Run._set_total_nodes</a></div><div class="ttdeci">def _set_total_nodes(self)</div><div class="ttdef"><b>Definition:</b> <a href="cheetah_2model_8py_source.html#l00556">model.py:556</a></div></div>
<div class="ttc" id="classcodar_1_1cheetah_1_1model_1_1_run_component_html_ac5ca127f98817a9a14ef6d63d9b53d4f"><div class="ttname"><a href="classcodar_1_1cheetah_1_1model_1_1_run_component.html#ac5ca127f98817a9a14ef6d63d9b53d4f">codar.cheetah.model.RunComponent.runner_override</a></div><div class="ttdeci">runner_override</div><div class="ttdef"><b>Definition:</b> <a href="cheetah_2model_8py_source.html#l00889">model.py:889</a></div></div>
<div class="ttc" id="classcodar_1_1cheetah_1_1model_1_1_campaign_html_a6c58ab5dac64e6ab4796c6e6de6347c7"><div class="ttname"><a href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a6c58ab5dac64e6ab4796c6e6de6347c7">codar.cheetah.model.Campaign.scheduler_options</a></div><div class="ttdeci">dictionary scheduler_options</div><div class="ttdef"><b>Definition:</b> <a href="cheetah_2model_8py_source.html#l00087">model.py:87</a></div></div>
<div class="ttc" id="classcodar_1_1cheetah_1_1exc_1_1_campaign_parse_error_html"><div class="ttname"><a href="classcodar_1_1cheetah_1_1exc_1_1_campaign_parse_error.html">codar.cheetah.exc.CampaignParseError</a></div><div class="ttdef"><b>Definition:</b> <a href="cheetah_2exc_8py_source.html#l00016">exc.py:16</a></div></div>
<div class="ttc" id="classcodar_1_1cheetah_1_1model_1_1_run_html_ac8ed0b936f206cd76d3364db0698a5c7"><div class="ttname"><a href="classcodar_1_1cheetah_1_1model_1_1_run.html#ac8ed0b936f206cd76d3364db0698a5c7">codar.cheetah.model.Run._pre_submit_dir_size_fname</a></div><div class="ttdeci">_pre_submit_dir_size_fname</div><div class="ttdef"><b>Definition:</b> <a href="cheetah_2model_8py_source.html#l00444">model.py:444</a></div></div>
<div class="ttc" id="classcodar_1_1cheetah_1_1model_1_1_campaign_html_a22d066017db80781e962ce372c32bf79"><div class="ttname"><a href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a22d066017db80781e962ce372c32bf79">codar.cheetah.model.Campaign.machine</a></div><div class="ttdeci">machine</div><div class="ttdef"><b>Definition:</b> <a href="cheetah_2model_8py_source.html#l00125">model.py:125</a></div></div>
<div class="ttc" id="namespacecodar_1_1cheetah_1_1helpers_html_aefd230bdcbba1681b70244f39310b68b"><div class="ttname"><a href="namespacecodar_1_1cheetah_1_1helpers.html#aefd230bdcbba1681b70244f39310b68b">codar.cheetah.helpers.parse_timedelta_seconds</a></div><div class="ttdeci">def parse_timedelta_seconds(v)</div><div class="ttdef"><b>Definition:</b> <a href="helpers_8py_source.html#l00029">helpers.py:29</a></div></div>
<div class="ttc" id="classcodar_1_1cheetah_1_1model_1_1_campaign_html_a28e44a6ede93e17d40627bd9a31fa8d3"><div class="ttname"><a href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a28e44a6ede93e17d40627bd9a31fa8d3">codar.cheetah.model.Campaign.tau_config</a></div><div class="ttdeci">tau_config</div><div class="ttdef"><b>Definition:</b> <a href="cheetah_2model_8py_source.html#l00090">model.py:90</a></div></div>
<div class="ttc" id="classcodar_1_1cheetah_1_1parameters_1_1_sweep_group_html"><div class="ttname"><a href="classcodar_1_1cheetah_1_1parameters_1_1_sweep_group.html">codar.cheetah.parameters.SweepGroup</a></div><div class="ttdef"><b>Definition:</b> <a href="parameters_8py_source.html#l00011">parameters.py:11</a></div></div>
<div class="ttc" id="classcodar_1_1cheetah_1_1model_1_1_campaign_html_a86d1217f25978d2210e2ddd6d2a99937"><div class="ttname"><a href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a86d1217f25978d2210e2ddd6d2a99937">codar.cheetah.model.Campaign.run_post_process_script</a></div><div class="ttdeci">run_post_process_script</div><div class="ttdef"><b>Definition:</b> <a href="cheetah_2model_8py_source.html#l00064">model.py:64</a></div></div>
<div class="ttc" id="classcodar_1_1cheetah_1_1model_1_1_campaign_html_a1b3525f75cec5b7d738a1aea32c44612"><div class="ttname"><a href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a1b3525f75cec5b7d738a1aea32c44612">codar.cheetah.model.Campaign.kill_on_partial_failure</a></div><div class="ttdeci">bool kill_on_partial_failure</div><div class="ttdef"><b>Definition:</b> <a href="cheetah_2model_8py_source.html#l00056">model.py:56</a></div></div>
<div class="ttc" id="classcodar_1_1cheetah_1_1model_1_1_run_component_html_a61b71b40331e4375a82cf0be848acff5"><div class="ttname"><a href="classcodar_1_1cheetah_1_1model_1_1_run_component.html#a61b71b40331e4375a82cf0be848acff5">codar.cheetah.model.RunComponent.args</a></div><div class="ttdeci">args</div><div class="ttdef"><b>Definition:</b> <a href="cheetah_2model_8py_source.html#l00877">model.py:877</a></div></div>
<div class="ttc" id="classcodar_1_1cheetah_1_1model_1_1_campaign_html_aa7d421cedfa8ffb615f6fd8f38b208ef"><div class="ttname"><a href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#aa7d421cedfa8ffb615f6fd8f38b208ef">codar.cheetah.model.Campaign.run_dir_setup_script</a></div><div class="ttdeci">run_dir_setup_script</div><div class="ttdef"><b>Definition:</b> <a href="cheetah_2model_8py_source.html#l00083">model.py:83</a></div></div>
<div class="ttc" id="classcodar_1_1cheetah_1_1model_1_1_campaign_html_af655e512e1d8b7a3bd5104d890dab023"><div class="ttname"><a href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#af655e512e1d8b7a3bd5104d890dab023">codar.cheetah.model.Campaign.sosd_path</a></div><div class="ttdeci">sosd_path</div><div class="ttdef"><b>Definition:</b> <a href="cheetah_2model_8py_source.html#l00095">model.py:95</a></div></div>
<div class="ttc" id="namespacecodar_1_1cheetah_1_1adios__params_html_a9dff010d44b62d23336c76d11ed2c7e3"><div class="ttname"><a href="namespacecodar_1_1cheetah_1_1adios__params.html#a9dff010d44b62d23336c76d11ed2c7e3">codar.cheetah.adios_params.xml_has_transport</a></div><div class="ttdeci">def xml_has_transport(xml_filepath, transport_type)</div><div class="ttdef"><b>Definition:</b> <a href="adios__params_8py_source.html#l00042">adios_params.py:42</a></div></div>
<div class="ttc" id="classcodar_1_1cheetah_1_1model_1_1_campaign_html_a521eea7dac8df14f3ea9174cd6297340"><div class="ttname"><a href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a521eea7dac8df14f3ea9174cd6297340">codar.cheetah.model.Campaign.sos_analysis_path</a></div><div class="ttdeci">sos_analysis_path</div><div class="ttdef"><b>Definition:</b> <a href="cheetah_2model_8py_source.html#l00096">model.py:96</a></div></div>
<div class="ttc" id="classcodar_1_1cheetah_1_1model_1_1_run_html_abd8e72c6b76e5dc835494de437353ed8"><div class="ttname"><a href="classcodar_1_1cheetah_1_1model_1_1_run.html#abd8e72c6b76e5dc835494de437353ed8">codar.cheetah.model.Run._populate_rc_dependency</a></div><div class="ttdeci">def _populate_rc_dependency(self, rc_dependency)</div><div class="ttdef"><b>Definition:</b> <a href="cheetah_2model_8py_source.html#l00505">model.py:505</a></div></div>
<div class="ttc" id="classcodar_1_1cheetah_1_1model_1_1_campaign_html_a1c6c7a99c27b5ed80721cb4a2328446f"><div class="ttname"><a href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a1c6c7a99c27b5ed80721cb4a2328446f">codar.cheetah.model.Campaign.machine_scheduler_options</a></div><div class="ttdeci">machine_scheduler_options</div><div class="ttdef"><b>Definition:</b> <a href="cheetah_2model_8py_source.html#l00174">model.py:174</a></div></div>
<div class="ttc" id="classcodar_1_1cheetah_1_1model_1_1_run_html_a33e213b156b3b22e68738ce5c0942044"><div class="ttname"><a href="classcodar_1_1cheetah_1_1model_1_1_run.html#a33e213b156b3b22e68738ce5c0942044">codar.cheetah.model.Run.run_path</a></div><div class="ttdeci">run_path</div><div class="ttdef"><b>Definition:</b> <a href="cheetah_2model_8py_source.html#l00415">model.py:415</a></div></div>
<div class="ttc" id="classcodar_1_1cheetah_1_1model_1_1_campaign_html_abc6944cb247705f1e7059d59537836d0"><div class="ttname"><a href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#abc6944cb247705f1e7059d59537836d0">codar.cheetah.model.Campaign.name</a></div><div class="ttdeci">name</div><div class="ttdef"><b>Definition:</b> <a href="cheetah_2model_8py_source.html#l00047">model.py:47</a></div></div>
<div class="ttc" id="classcodar_1_1cheetah_1_1model_1_1_run_html_a11086d88359588a30f900faa28fd0fe7"><div class="ttname"><a href="classcodar_1_1cheetah_1_1model_1_1_run.html#a11086d88359588a30f900faa28fd0fe7">codar.cheetah.model.Run._group_codes_by_dependencies</a></div><div class="ttdeci">def _group_codes_by_dependencies(self, code_groups)</div><div class="ttdef"><b>Definition:</b> <a href="cheetah_2model_8py_source.html#l00589">model.py:589</a></div></div>
<div class="ttc" id="classcodar_1_1cheetah_1_1model_1_1_campaign_html_ab86c1861be341dfa601a1e404e8d08c4"><div class="ttname"><a href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#ab86c1861be341dfa601a1e404e8d08c4">codar.cheetah.model.Campaign._get_machine</a></div><div class="ttdeci">def _get_machine(self, machine_name)</div><div class="ttdef"><b>Definition:</b> <a href="cheetah_2model_8py_source.html#l00188">model.py:188</a></div></div>
<div class="ttc" id="classcodar_1_1cheetah_1_1model_1_1_campaign_html_ade0d3ba84103ebb3c91252576b3c18f1"><div class="ttname"><a href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#ade0d3ba84103ebb3c91252576b3c18f1">codar.cheetah.model.Campaign.runs</a></div><div class="ttdeci">runs</div><div class="ttdef"><b>Definition:</b> <a href="cheetah_2model_8py_source.html#l00127">model.py:127</a></div></div>
<div class="ttc" id="classcodar_1_1cheetah_1_1model_1_1_run_component_html_abcc514032d8dc3c203db3fea1e0cd94b"><div class="ttname"><a href="classcodar_1_1cheetah_1_1model_1_1_run_component.html#abcc514032d8dc3c203db3fea1e0cd94b">codar.cheetah.model.RunComponent.hostfile</a></div><div class="ttdeci">hostfile</div><div class="ttdef"><b>Definition:</b> <a href="cheetah_2model_8py_source.html#l00887">model.py:887</a></div></div>
<div class="ttc" id="classcodar_1_1cheetah_1_1model_1_1_run_component_html_acb1eadc1f5def0e5b74cef8042ee3baa"><div class="ttname"><a href="classcodar_1_1cheetah_1_1model_1_1_run_component.html#acb1eadc1f5def0e5b74cef8042ee3baa">codar.cheetah.model.RunComponent.sleep_after</a></div><div class="ttdeci">sleep_after</div><div class="ttdef"><b>Definition:</b> <a href="cheetah_2model_8py_source.html#l00880">model.py:880</a></div></div>
<div class="ttc" id="classcodar_1_1cheetah_1_1model_1_1_run_html_a14b4fe17aa41cb132a99ea31173b3084"><div class="ttname"><a href="classcodar_1_1cheetah_1_1model_1_1_run.html#a14b4fe17aa41cb132a99ea31173b3084">codar.cheetah.model.Run._insert_dataspaces_rc</a></div><div class="ttdeci">def _insert_dataspaces_rc(self, client_rcs, machine)</div><div class="ttdef"><b>Definition:</b> <a href="cheetah_2model_8py_source.html#l00684">model.py:684</a></div></div>
<div class="ttc" id="classcodar_1_1cheetah_1_1model_1_1_run_component_html_a70c8417b14f64e93c812d52d63180e1f"><div class="ttname"><a href="classcodar_1_1cheetah_1_1model_1_1_run_component.html#a70c8417b14f64e93c812d52d63180e1f">codar.cheetah.model.RunComponent.linked_with_sosflow</a></div><div class="ttdeci">linked_with_sosflow</div><div class="ttdef"><b>Definition:</b> <a href="cheetah_2model_8py_source.html#l00885">model.py:885</a></div></div>
<div class="ttc" id="classcodar_1_1cheetah_1_1exc_1_1_cheetah_exception_html"><div class="ttname"><a href="classcodar_1_1cheetah_1_1exc_1_1_cheetah_exception.html">codar.cheetah.exc.CheetahException</a></div><div class="ttdef"><b>Definition:</b> <a href="cheetah_2exc_8py_source.html#l00006">exc.py:6</a></div></div>
<div class="ttc" id="classcodar_1_1cheetah_1_1model_1_1_campaign_html_aa20562ca5ab807497efaeccdbdf78c45"><div class="ttname"><a href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#aa20562ca5ab807497efaeccdbdf78c45">codar.cheetah.model.Campaign._check_code_paths</a></div><div class="ttdeci">def _check_code_paths(self)</div><div class="ttdef"><b>Definition:</b> <a href="cheetah_2model_8py_source.html#l00362">model.py:362</a></div></div>
<div class="ttc" id="classcodar_1_1cheetah_1_1model_1_1_campaign_html_a95d21ac374c6126edc3c82b8f953b9af"><div class="ttname"><a href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a95d21ac374c6126edc3c82b8f953b9af">codar.cheetah.model.Campaign.inputs</a></div><div class="ttdeci">list inputs</div><div class="ttdef"><b>Definition:</b> <a href="cheetah_2model_8py_source.html#l00051">model.py:51</a></div></div>
<div class="ttc" id="classcodar_1_1cheetah_1_1model_1_1_run_component_html_a4894bb7231945d68c104e3f9d647066b"><div class="ttname"><a href="classcodar_1_1cheetah_1_1model_1_1_run_component.html#a4894bb7231945d68c104e3f9d647066b">codar.cheetah.model.RunComponent.sched_args</a></div><div class="ttdeci">sched_args</div><div class="ttdef"><b>Definition:</b> <a href="cheetah_2model_8py_source.html#l00878">model.py:878</a></div></div>
<div class="ttc" id="classcodar_1_1cheetah_1_1model_1_1_run_html_ac73191d8724dfa774f8c52df30007c11"><div class="ttname"><a href="classcodar_1_1cheetah_1_1model_1_1_run.html#ac73191d8724dfa774f8c52df30007c11">codar.cheetah.model.Run.sosflow_profiling</a></div><div class="ttdeci">sosflow_profiling</div><div class="ttdef"><b>Definition:</b> <a href="cheetah_2model_8py_source.html#l00423">model.py:423</a></div></div>
<div class="ttc" id="classcodar_1_1cheetah_1_1model_1_1_run_html_ac8268174ba2fba6a0f8437d44f991331"><div class="ttname"><a href="classcodar_1_1cheetah_1_1model_1_1_run.html#ac8268174ba2fba6a0f8437d44f991331">codar.cheetah.model.Run.run_id</a></div><div class="ttdeci">run_id</div><div class="ttdef"><b>Definition:</b> <a href="cheetah_2model_8py_source.html#l00416">model.py:416</a></div></div>
<div class="ttc" id="classcodar_1_1cheetah_1_1model_1_1_run_html_a88ee35c04cfd039b398f131a50949305"><div class="ttname"><a href="classcodar_1_1cheetah_1_1model_1_1_run.html#a88ee35c04cfd039b398f131a50949305">codar.cheetah.model.Run.run_components</a></div><div class="ttdeci">run_components</div><div class="ttdef"><b>Definition:</b> <a href="cheetah_2model_8py_source.html#l00427">model.py:427</a></div></div>
<div class="ttc" id="classcodar_1_1savanna_1_1node__layout_1_1_node_layout_html"><div class="ttname"><a href="classcodar_1_1savanna_1_1node__layout_1_1_node_layout.html">codar.savanna.node_layout.NodeLayout</a></div><div class="ttdef"><b>Definition:</b> <a href="node__layout_8py_source.html#l00006">node_layout.py:6</a></div></div>
<div class="ttc" id="classcodar_1_1cheetah_1_1model_1_1_campaign_html_a963d2407a8818742d80cdabd0b462dc6"><div class="ttname"><a href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a963d2407a8818742d80cdabd0b462dc6">codar.cheetah.model.Campaign.codes</a></div><div class="ttdeci">list codes</div><div class="ttdef"><b>Definition:</b> <a href="cheetah_2model_8py_source.html#l00048">model.py:48</a></div></div>
<div class="ttc" id="classcodar_1_1cheetah_1_1model_1_1_run_component_html_aab7eb17918554027035c553b8580c140"><div class="ttname"><a href="classcodar_1_1cheetah_1_1model_1_1_run_component.html#aab7eb17918554027035c553b8580c140">codar.cheetah.model.RunComponent.timeout</a></div><div class="ttdeci">timeout</div><div class="ttdef"><b>Definition:</b> <a href="cheetah_2model_8py_source.html#l00882">model.py:882</a></div></div>
<div class="ttc" id="classcodar_1_1cheetah_1_1model_1_1_run_component_html_a1d8cb3d579339ac5eba3c0311640b382"><div class="ttname"><a href="classcodar_1_1cheetah_1_1model_1_1_run_component.html#a1d8cb3d579339ac5eba3c0311640b382">codar.cheetah.model.RunComponent.component_inputs</a></div><div class="ttdeci">component_inputs</div><div class="ttdef"><b>Definition:</b> <a href="cheetah_2model_8py_source.html#l00884">model.py:884</a></div></div>
<div class="ttc" id="classcodar_1_1cheetah_1_1model_1_1_campaign_html_a0bb7182008a8afa311fe8f96250b64b4"><div class="ttname"><a href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a0bb7182008a8afa311fe8f96250b64b4">codar.cheetah.model.Campaign._assert_unique_group_names</a></div><div class="ttdeci">def _assert_unique_group_names(self, campaign_dir)</div><div class="ttdef"><b>Definition:</b> <a href="cheetah_2model_8py_source.html#l00377">model.py:377</a></div></div>
<div class="ttc" id="classcodar_1_1cheetah_1_1parameters_1_1_sym_link_html"><div class="ttname"><a href="classcodar_1_1cheetah_1_1parameters_1_1_sym_link.html">codar.cheetah.parameters.SymLink</a></div><div class="ttdef"><b>Definition:</b> <a href="parameters_8py_source.html#l00491">parameters.py:491</a></div></div>
<div class="ttc" id="classcodar_1_1cheetah_1_1model_1_1_run_html_aef7a539e9aa216737394edbdcf0ea726"><div class="ttname"><a href="classcodar_1_1cheetah_1_1model_1_1_run.html#aef7a539e9aa216737394edbdcf0ea726">codar.cheetah.model.Run.component_inputs</a></div><div class="ttdeci">component_inputs</div><div class="ttdef"><b>Definition:</b> <a href="cheetah_2model_8py_source.html#l00425">model.py:425</a></div></div>
<div class="ttc" id="classcodar_1_1cheetah_1_1model_1_1_campaign_html_aa7fbc79a48f35a16bb12db12bef77a20"><div class="ttname"><a href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#aa7fbc79a48f35a16bb12db12bef77a20">codar.cheetah.model.Campaign.machine_app_config_script</a></div><div class="ttdeci">machine_app_config_script</div><div class="ttdef"><b>Definition:</b> <a href="cheetah_2model_8py_source.html#l00180">model.py:180</a></div></div>
<div class="ttc" id="classcodar_1_1cheetah_1_1model_1_1_run_html"><div class="ttname"><a href="classcodar_1_1cheetah_1_1model_1_1_run.html">codar.cheetah.model.Run</a></div><div class="ttdef"><b>Definition:</b> <a href="cheetah_2model_8py_source.html#l00401">model.py:401</a></div></div>
<div class="ttc" id="classcodar_1_1cheetah_1_1model_1_1_campaign_html_a7923c1c6debd3f7ce3c1730d21cdfb80"><div class="ttname"><a href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#a7923c1c6debd3f7ce3c1730d21cdfb80">codar.cheetah.model.Campaign.umask</a></div><div class="ttdeci">umask</div><div class="ttdef"><b>Definition:</b> <a href="cheetah_2model_8py_source.html#l00052">model.py:52</a></div></div>
<div class="ttc" id="classcodar_1_1cheetah_1_1model_1_1_run_component_html_a0ea6b3921652cd3852a5e2425d9a80ca"><div class="ttname"><a href="classcodar_1_1cheetah_1_1model_1_1_run_component.html#a0ea6b3921652cd3852a5e2425d9a80ca">codar.cheetah.model.RunComponent.after_rc_done</a></div><div class="ttdeci">after_rc_done</div><div class="ttdef"><b>Definition:</b> <a href="cheetah_2model_8py_source.html#l00888">model.py:888</a></div></div>
<div class="ttc" id="classcodar_1_1cheetah_1_1model_1_1_campaign_html_af71218dfabb60e7f23997a0a8f1e1158"><div class="ttname"><a href="classcodar_1_1cheetah_1_1model_1_1_campaign.html#af71218dfabb60e7f23997a0a8f1e1158">codar.cheetah.model.Campaign.python_path</a></div><div class="ttdeci">python_path</div><div class="ttdef"><b>Definition:</b> <a href="cheetah_2model_8py_source.html#l00112">model.py:112</a></div></div>
<div class="ttc" id="classcodar_1_1cheetah_1_1model_1_1_run_html_a564be04cf0e1030d650f3ba89764e102"><div class="ttname"><a href="classcodar_1_1cheetah_1_1model_1_1_run.html#a564be04cf0e1030d650f3ba89764e102">codar.cheetah.model.Run.node_layout</a></div><div class="ttdeci">node_layout</div><div class="ttdef"><b>Definition:</b> <a href="cheetah_2model_8py_source.html#l00421">model.py:421</a></div></div>
<div class="ttc" id="classcodar_1_1cheetah_1_1model_1_1_run_html_af2c8be223aa9290089e020cffec6f531"><div class="ttname"><a href="classcodar_1_1cheetah_1_1model_1_1_run.html#af2c8be223aa9290089e020cffec6f531">codar.cheetah.model.Run.instance</a></div><div class="ttdeci">instance</div><div class="ttdef"><b>Definition:</b> <a href="cheetah_2model_8py_source.html#l00412">model.py:412</a></div></div>
<div class="ttc" id="classcodar_1_1cheetah_1_1model_1_1_run_html_a1d1e212876736c32d9c2bb446f79a655"><div class="ttname"><a href="classcodar_1_1cheetah_1_1model_1_1_run.html#a1d1e212876736c32d9c2bb446f79a655">codar.cheetah.model.Run.component_subdirs</a></div><div class="ttdeci">component_subdirs</div><div class="ttdef"><b>Definition:</b> <a href="cheetah_2model_8py_source.html#l00422">model.py:422</a></div></div>
<div class="ttc" id="classcodar_1_1cheetah_1_1model_1_1_run_html_a9b663454e66c7bd398e7f5f4bf9fcbed"><div class="ttname"><a href="classcodar_1_1cheetah_1_1model_1_1_run.html#a9b663454e66c7bd398e7f5f4bf9fcbed">codar.cheetah.model.Run.inputs</a></div><div class="ttdeci">inputs</div><div class="ttdef"><b>Definition:</b> <a href="cheetah_2model_8py_source.html#l00417">model.py:417</a></div></div>
<div class="ttc" id="classcodar_1_1cheetah_1_1model_1_1_run_html_ad61ae023de5960c8bdbfd8437daafda2"><div class="ttname"><a href="classcodar_1_1cheetah_1_1model_1_1_run.html#ad61ae023de5960c8bdbfd8437daafda2">codar.cheetah.model.Run.codes_path</a></div><div class="ttdeci">codes_path</div><div class="ttdef"><b>Definition:</b> <a href="cheetah_2model_8py_source.html#l00414">model.py:414</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
